###########################
# Yugoslavian Events
###########################

add_namespace = DOD_yugoslavia


# Yugoslavia joins axis without solving Anti-German military - coup event
country_event = {
	id = DOD_yugoslavia.1
	title = DOD_yugoslavia.1.t
	desc = DOD_yugoslavia.1.desc
	picture = GFX_report_event_yugoslavian_king_peter
	
	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		#tag = YUG #EOA
		is_in_faction_with = GER
		#has_idea = anti_german_military
		GER = {
			has_government = fascism
			is_faction_leader = yes
		}
	}
	
	option = { #welp
		name = DOD_yugoslavia.1.a
		ai_chance = {
			factor = 70
		}	
		set_country_flag = coup_d_etat
		retire_country_leader = yes
		add_country_leader_role = { 
			character = YUG_peter_ii
			country_leader = {
				ideology = absolutism 
				expire = "1965.1.1.1" 
				traits = { 

				} 
			} 
		}
		YUG_peter_ii = {
			promote_character = yes
		}
		GER = { country_event = DOD_yugoslavia.2 }
		if = {
			limit = {
				is_in_faction_with = GER
			}
			GER = { remove_from_faction = YUG }
		}
		if = {
			limit = {
				is_puppet_of = GER
			}
			set_autonomy = {
				target = YUG
				autonomy_state = autonomy_free
			}
			set_politics = { ruling_party = neutrality elections_allowed = yes }
			add_popularity = { ideology = neutrality popularity = 0.5 }
			set_party_name = { ideology = neutrality long_name = YUG_neutrality_party_2 name = YUG_neutrality_party_2 }
		}
		white_peace = ENG
		white_peace = FRA
		if = {
			limit = {
				has_war_with = SOV 
			}
			white_peace = SOV 
		}
	}
	option = { #resistance to the coup, call on Germans for support
		name = DOD_yugoslavia.1.b
		ai_chance = {
			factor = 30
			modifier = {
				factor = 0 
				is_historical_focus_on = yes
			}	
		}	
		GER = { country_event = DOD_yugoslavia.3 }
		if = {
			limit = {
				109 = { is_owned_by = YUG }
			}
			set_capital = { state = 109 }
		}
		else = {
			if = {
				limit = {
					104 = { is_owned_by = YUG }
				}
				set_capital = { state = 104 }
			}
		}
		start_civil_war = { ideology = conservatism size = 0.6 capital = 107 states = { 108 107 106 105 } }
		random_country = {
			limit = {
				original_tag = YUG
				democratic_govt = yes
			}
			retire_country_leader = yes
			set_capital = { state = 107 }
			add_country_leader_role = { 
				character = YUG_peter_ii
				country_leader = {
					ideology = social_conservatism 
					expire = "1965.1.1.1" 
					traits = { 
					} 
				} 
			}
			YUG_peter_ii = {
				promote_character = yes
			}
		}
	}
}

#Yugoslavian coup event - Yugoslavia has rolled over, event for Germany to intervene
country_event = {
	id = DOD_yugoslavia.2
	title = DOD_yugoslavia.2.t
	desc = DOD_yugoslavia.2.desc
	picture = GFX_report_event_military_planning
	
	is_triggered_only = yes
	
	option = { #invasion!
		name = DOD_yugoslavia.2.a	
		activate_decision = GER_operation_25
	}
}

#Yugoslavian coup event - Yugoslavian government resists the coup, Germany comes to the rescue...or not
country_event = {
	id = DOD_yugoslavia.3
	title = DOD_yugoslavia.2.t
	desc = DOD_yugoslavia.3.desc
	picture = GFX_report_event_military_planning
	
	is_triggered_only = yes
	
	option = { #invasion!
		name = DOD_yugoslavia.3.a
		YUG = {
			white_peace = ENG
			white_peace = FRA
			if = {
				limit = {
					has_war_with = SOV 
				}
				white_peace = SOV 
			}
		}
		ai_chance = {
			factor = 70
		}	
		create_wargoal = {
			type = annex_everything
			target = YUG
		}
	}

	option = { #rescue
		name = DOD_yugoslavia.3.b	
		ai_chance = {
			factor = 30
		}
		white_peace = GER
		add_to_faction = YUG
		YUG = { 
			add_ai_strategy = {
				type = alliance
				id = "GER"
				value = 200000
			}
		}
	}
}

#Yugoslavian independence war(s)
country_event = {
	id = DOD_yugoslavia.10
	title = DOD_yugoslavia.10.t
	desc = DOD_yugoslavia.10.desc
	picture = GFX_report_event_yugoslavia_partisans
	
	trigger = {
		#tag = YUG #EOA
		has_idea = YUG_idea_croatian_opposition
		has_war_with = GER
		GER = {
			has_government = fascism
		}
		OR = {
			CRO = { 
				exists = yes 
				is_subject_of = YUG 
			}
			109 = { is_owned_and_controlled_by = YUG }
		}
	}
	
	is_triggered_only = yes
	fire_only_once = yes #would be funny though

	option = { 
		name = DOD_yugoslavia.10.a
		ai_chance = {
			factor = 70
		}	
		if = {
			limit = {
				CRO = {
					exists = yes
					is_subject_of = YUG
				}
			}
			set_autonomy = { target = CRO autonomy_state = autonomy_free }
			CRO = {
				declare_war_on = {
					target = YUG
					type = annex_everything

				}
			}
		}
		if = {
			limit = {
				CRO = {
					exists = no
				}
				109 = { is_owned_and_controlled_by = YUG }
			}
			CRO = { transfer_state = 109 }
			if = {
				limit = {
					103 = { is_owned_and_controlled_by = YUG }
				}
				CRO = { transfer_state = 103 }
			}
			CRO = {
				declare_war_on = {
					target = YUG
					type = annex_everything
				}
				load_oob = "CRO_YUG_independence"
			}
		}
	}
}

#Yugoslavia wants to buy planes - event for GER,FRA,ENG,ITA
country_event = {
	id = DOD_yugoslavia.20
	title = DOD_yugoslavia.20.t
	desc = DOD_yugoslavia.20.desc
	picture = GFX_report_event_bomber_factory
	
	is_triggered_only = yes
	
	option = { # send some fighters
		name = DOD_yugoslavia.20.a
		ai_chance = {
			factor = 70
		}	
		trigger = {
			has_equipment = { fighter_equipment > 50 }
		}
		send_equipment = {
			target = YUG
			type = fighter_equipment
			amount = 50
		}
		add_timed_idea = { idea = YUG_air_payment days = 180 }
		YUG = {
			country_event = DOD_yugoslavia.21
		}
	}	
	option = { # send some bombers
		name = DOD_yugoslavia.20.b
		ai_chance = {
			factor = 70
		}
		trigger = {
			has_equipment = { tac_bomber_equipment > 25 }
		}
		send_equipment = {
			target = YUG
			type = tac_bomber_equipment
			amount = 25
		}	
		add_timed_idea = { idea = YUG_air_payment days = 180 }
		YUG = {
			country_event = DOD_yugoslavia.22
		}
	}

	option = { # divert some fighters from production
		name = DOD_yugoslavia.20.d
		ai_chance = {
			factor = 70
		}	
		trigger = {
			NOT = { has_equipment = { fighter_equipment > 50 } }
		}
		add_timed_idea = { idea = YUG_air_payment days = 180 }
		add_timed_idea = { idea = YUG_fighter_production_diverted days = 120 }
		YUG = {
			country_event = DOD_yugoslavia.23
		}
	}

	option = { # divert some bombers from production
		name = DOD_yugoslavia.20.e
		ai_chance = {
			factor = 70
		}
		trigger = {
			NOT = { has_equipment = { tac_bomber_equipment > 25 } }
		}
		add_timed_idea = { idea = YUG_air_payment days = 180 }
		add_timed_idea = { idea = YUG_bomber_production_diverted days = 120 }
		YUG = {
			country_event = DOD_yugoslavia.24
		}
	}
	option = { # no
		name = DOD_yugoslavia.20.c
		ai_chance = {
			factor = 30
		}	
	}
}
#Yugoslavia wants to buy planes - Major nation sells some fighters
country_event = {
	id = DOD_yugoslavia.21
	title = DOD_yugoslavia.21.t
	desc = DOD_yugoslavia.21.desc   
	picture = GFX_report_event_bomber_factory
	
	is_triggered_only = yes
	
	option = { # cool
		name = DOD_yugoslavia.21.a
		
		add_opinion_modifier = { target = FROM modifier = YUG_sold_planes}	
	}
}

#Yugoslavia wants to buy planes - Major nation sells some bombers
country_event = {
	id = DOD_yugoslavia.22
	title = DOD_yugoslavia.22.t
	desc = DOD_yugoslavia.22.desc
	picture = GFX_report_event_bomber_factory
	
	is_triggered_only = yes
	
	option = { # cool
		name = DOD_yugoslavia.22.a
		
		add_opinion_modifier = { target = FROM modifier = YUG_sold_planes}	
	}
}
#Yugoslavia wants to buy planes - Major nation sells some fighters
country_event = {
	id = DOD_yugoslavia.23
	title = DOD_yugoslavia.21.t
	desc = DOD_yugoslavia.21.desc   
	picture = GFX_report_event_bomber_factory
	
	is_triggered_only = yes
	
	option = { # cool
		name = DOD_yugoslavia.21.a

		if = {
			limit = {
				FROM = {
					tag = GER
				}
			}
			if = {
				limit = { 
					GER = { 
						has_tech = tech_me_109_late_fighter_equipment_2 
					} 
				}
				add_equipment_to_stockpile = { type = me_109_late_fighter_equipment_2 amount = 50 producer = GER } 
			}
			else_if = {
				limit = { 
					GER = { 
						has_tech = tech_me_109_mid_fighter_equipment_1 
					} 
				}
				add_equipment_to_stockpile = { type = me_109_mid_fighter_equipment_1 amount = 50 producer = GER } 
			}
			else_if = {
				limit = { 
					GER = { 
						has_tech = tech_me_109_fighter_equipment_2 
					} 
				}
				add_equipment_to_stockpile = { type = me_109_fighter_equipment_2 amount = 50 producer = GER } 
			}
			else = {
				add_equipment_to_stockpile = { type = he_51_equipment_2 amount = 50 producer = GER } 
			}
		} 
		if = {
			limit = {
				FROM = {
					tag = ITA
				}
			}
			if = {
				limit = { 
					ITA = { 
						has_tech = tech_mc205_fighter_equipment_1 
					} 
				}
				add_equipment_to_stockpile = { type = mc205_fighter_equipment_1 amount = 50 producer = ITA } 
			}
			else_if = {
				limit = { 
					ITA = { 
						has_tech = tech_mc200_fighter_equipment_1 
					} 
				}
				add_equipment_to_stockpile = { type = mc200_fighter_equipment_1 amount = 50 producer = ITA } 
			}
			else_if = {
				limit = { 
					ITA = { 
						has_tech = tech_g50_fighter_equipment_1 
					} 
				}
				add_equipment_to_stockpile = { type = g50_fighter_equipment_1 amount = 50 producer = ITA } 
			}
			else = {
				add_equipment_to_stockpile = { type = cr_32_fighter_equipment_2 amount = 50 producer = ITA } 
			}
		}

		if = {
			limit = {
				FROM = {
					tag = FRA
				}
			}
			if = {
				limit = { 
					FRA = { 
						has_tech = tech_bloch_157_fighter_equipment_1 
					} 
				}
				add_equipment_to_stockpile = { type = bloch_157_fighter_equipment_1 amount = 50 producer = FRA } 
			}
			else_if = {
				limit = { 
					FRA = { 
						has_tech = tech_ms_410_fighter_equipment_1 
					} 
				}
				add_equipment_to_stockpile = { type = ms_410_fighter_equipment_1 amount = 50 producer = FRA } 
			}
			else_if = {
				limit = { 
					FRA = { 
						has_tech = tech_ms_405_fighter_equipment_1 
					} 
				}
				add_equipment_to_stockpile = { type = ms_405_fighter_equipment_1 amount = 50 producer = FRA } 
			}
			else = {
				add_equipment_to_stockpile = { type = d_500_fighter_equipment_3 amount = 50 producer = FRA } 
			}
		}

		if = {
			limit = {
				FROM = {
					tag = ENG
				}
			}
			if = {
				limit = { 
					ENG = { 
						has_tech = tech_late_spitfire_equipment_1 
					} 
				}
				add_equipment_to_stockpile = { type = late_spitfire_equipment_1 amount = 50 producer = ENG } 
			}
			else_if = {
				limit = { 
					ENG = { 
						has_tech = tech_spitfire_equipment_1 
					} 
				}
				add_equipment_to_stockpile = { type = spitfire_equipment_1 amount = 50 producer = ENG } 
			}
			else_if = {
				limit = { 
					ENG = { 
						has_tech = tech_hawker_hurricane_equipment_1 
					} 
				}
				add_equipment_to_stockpile = { type = hawker_hurricane_equipment_1 amount = 50 producer = ENG } 
			}
			else = {
				add_equipment_to_stockpile = { type = hawker_demon_equipment_1 amount = 50 producer = ENG } 
			}
		}
		if = {
			limit = {
				FROM = {
					tag = USA
				}
			}
			if = {
				limit = { 
					USA = { 
						has_tech = tech_northamerican_p51d_equipment_1
					} 
				}
				add_equipment_to_stockpile = { type = northamerican_p51d_equipment_1 amount = 50 producer = USA } 
			}
			else_if = {
				limit = { 
					USA = { 
						has_tech = tech_curtiss_p40_equipment_2 
					} 
				}
				add_equipment_to_stockpile = { type = curtiss_p40_equipment_2 amount = 50 producer = USA } 
			}
			else_if = {
				limit = { 
					USA = { 
						has_tech = tech_curtiss_p36_equipment_1 
					} 
				}
				add_equipment_to_stockpile = { type = curtiss_p36_equipment_1 amount = 50 producer = USA } 
			}
			else = {
				add_equipment_to_stockpile = { type = usa_boeing_p26_equipment_2 amount = 50 producer = USA } 
			}
		}
		if = {
			limit = {
				FROM = {
					tag = SOV
				}
			}
			if = {
				limit = { 
					SOV = { 
						has_tech = tech_yak_3_equipment_1
					} 
				}
				add_equipment_to_stockpile = { type = yak_3_equipment_1 amount = 50 producer = SOV } 
			}
			else_if = {
				limit = { 
					SOV = { 
						has_tech = tech_yak_1_equipment_1
					} 
				}
				add_equipment_to_stockpile = { type = yak_1_equipment_1 amount = 50 producer = SOV } 
			}
			else_if = {
				limit = { 
					SOV = { 
						has_tech = tech_i_16_equipment_3 
					} 
				}
				add_equipment_to_stockpile = { type = i_16_equipment_3 amount = 50 producer = SOV } 
			}
			else = {
				add_equipment_to_stockpile = { type = i_15_equipment_1 amount = 50 producer = SOV } 
			}
		}
		add_opinion_modifier = { target = FROM modifier = YUG_sold_planes}	
	}
}

#Yugoslavia wants to buy planes - Major nation sells some bombers
country_event = {
	id = DOD_yugoslavia.24
	title = DOD_yugoslavia.22.t
	desc = DOD_yugoslavia.22.desc
	picture = GFX_report_event_bomber_factory
	
	is_triggered_only = yes
	
	option = { # cool
		name = DOD_yugoslavia.21.a

		if = {
			limit = {
				FROM = {
					tag = GER
				}
			}
			if = {
				limit = { 
					GER = { 
						has_tech = tech_ju_88_s_bomber_equipment_1 
					} 
				}
				add_equipment_to_stockpile = { type = ju_88_s_bomber_equipment_1 amount = 50 producer = GER } 
			}
			else_if = {
				limit = { 
					GER = { 
						has_tech = tech_ju_88_bomber_equipment_1 
					} 
				}
				add_equipment_to_stockpile = { type = ju_88_bomber_equipment_1 amount = 50 producer = GER } 
			}
			else_if = {
				limit = { 
					GER = { 
						has_tech = tech_he_111_bomber_equipment_1 
					} 
				}
				add_equipment_to_stockpile = { type = he_111_bomber_equipment_1 amount = 50 producer = GER } 
			}
			else = {
				add_equipment_to_stockpile = { type = do_23_bomber_equipment_1 amount = 50 producer = GER } 
			}
		}
		if = {
			limit = {
				FROM = {
					tag = ITA
				}
			}
			if = {
				limit = { 
					ITA = { 
						has_tech = tech_z1018_bomber_equipment_1 
					} 
				}
				add_equipment_to_stockpile = { type = z1018_bomber_equipment_1 amount = 50 producer = ITA } 
			}
			else_if = {
				limit = { 
					ITA = { 
						has_tech = tech_z1007bis_bomber_equipment_1 
					} 
				}
				add_equipment_to_stockpile = { type = z1007bis_bomber_equipment_1 amount = 50 producer = ITA } 
			}
			else_if = {
				limit = { 
					ITA = { 
						has_tech = tech_sm79_light_bomber_equipment_1 
					} 
				}
				add_equipment_to_stockpile = { type = sm79_light_bomber_equipment_1 amount = 50 producer = ITA } 
			}
			else = {
				add_equipment_to_stockpile = { type = ca111_bomber_equipment_3 amount = 50 producer = ITA } 
			}
		}

		if = {
			limit = {
				FROM = {
					tag = FRA
				}
			}
			if = {
				limit = { 
					FRA = { 
						has_tech = tech_amiot_351_bomber_equipment_1
					} 
				}
				add_equipment_to_stockpile = { type = amiot_351_bomber_equipment_1 amount = 50 producer = FRA } 
			}
			else_if = {
				limit = { 
					FRA = { 
						has_tech = tech_potez_633_bomber_equipment_1 
					} 
				}
				add_equipment_to_stockpile = { type = potez_633_bomber_equipment_1 amount = 50 producer = FRA } 
			}
			else_if = {
				limit = { 
					FRA = { 
						has_tech = tech_bloch_210_bomber_equipment_1 
					} 
				}
				add_equipment_to_stockpile = { type = bloch_210_bomber_equipment_1 amount = 50 producer = FRA } 
			}
			else = {
				add_equipment_to_stockpile = { type = bloch_200_bomber_equipment_1 amount = 50 producer = FRA } 
			}
		}

		if = {
			limit = {
				FROM = {
					tag = ENG
				}
			}
			if = {
				limit = { 
					ENG = { 
						has_tech = tech_bristol_buckingham_equipment_1 
					} 
				}
				add_equipment_to_stockpile = { type = bristol_buckingham_equipment_1 amount = 50 producer = ENG } 
			}
			else_if = {
				limit = { 
					ENG = { 
						has_tech = tech_vickers_wellington_bomber_equipment_1 
					} 
				}
				add_equipment_to_stockpile = { type = vickers_wellington_bomber_equipment_1 amount = 50 producer = ENG } 
			}
			else_if = {
				limit = { 
					ENG = { 
						has_tech = tech_bristol_blenheim_equipment_1 
					} 
				}
				add_equipment_to_stockpile = { type = bristol_blenheim_equipment_1 amount = 50 producer = ENG } 
			}
			else = {
				add_equipment_to_stockpile = { type = vickers_valentia_equipment_1 amount = 50 producer = ENG } 
			}
		}
		add_opinion_modifier = { target = FROM modifier = YUG_sold_planes}	
	}
}
#Yugoslavia pressured by Germany - Anschluss
country_event = {
	id = DOD_yugoslavia.30
	title = DOD_yugoslavia.30.t
	desc = DOD_yugoslavia.30.desc
	picture = GFX_report_event_yugoslavia_flag
	
	is_triggered_only = yes
	
	option = { # put the squeeze on them
		name = DOD_yugoslavia.30.a
		ai_chance = {
			factor = 70
		}
		YUG = { 
			country_event = DOD_yugoslavia.31 
			set_country_flag = YUG_GER_pressure_1 #for ai_weights in focus tree
		}
		
	}	
	option = { # not interested
		name = DOD_yugoslavia.30.b
		ai_chance = {
			factor = 30
		}
		
	}
		
	
}

#Yugoslavia pressured by Germany - First event
country_event = {
	id = DOD_yugoslavia.31
	title = DOD_yugoslavia.31.t
	desc = DOD_yugoslavia.31.desc
	picture = GFX_report_event_german_speech
	
	is_triggered_only = yes
		
	option = { # not that bad yet
		name = DOD_yugoslavia.31.a
	}
}

#Yugoslavia pressured by Germany - Fate of CZE
country_event = {
	id = DOD_yugoslavia.32
	title = DOD_yugoslavia.30.t
	desc = DOD_yugoslavia.32.desc
	picture = GFX_report_event_german_troops
	
	is_triggered_only = yes
	
	option = { # put the squeeze on them
		name = DOD_yugoslavia.32.a
		ai_chance = {
			factor = 80
		}
		YUG = { 
			country_event = DOD_yugoslavia.33 
			set_country_flag = YUG_GER_pressure_2 #for ai_weights
		}
	}	
	option = { # not interested
		name = DOD_yugoslavia.32.b
		ai_chance = {
			factor = 20
		}
	}
}

#Yugoslavia pressured by Germany - Second event
country_event = {
	id = DOD_yugoslavia.33
	title = DOD_yugoslavia.31.t
	desc = DOD_yugoslavia.33.desc
	picture = GFX_report_event_german_troops
	
	is_triggered_only = yes
		
	option = { # not that bad
		name = DOD_yugoslavia.33.a
	}
}

#Yugoslavia pressured by Germany - Last Warning - after Fall of France
country_event = {
	id = DOD_yugoslavia.34
	title = DOD_yugoslavia.30.t
	desc = DOD_yugoslavia.34.desc
	picture = GFX_report_event_german_troops_paris
	
	is_triggered_only = yes
	
	option = { # put the squeeze on them
		name = DOD_yugoslavia.34.a
		ai_chance = {
			factor = 100
		}
		YUG = { country_event = DOD_yugoslavia.35 }
		hidden_effect = {
			country_event = { id = DOD_yugoslavia.36 days = 90 random = 168 }
		}
	}	
	option = { # not interested
		name = DOD_yugoslavia.34.b
		ai_chance = {
			factor = 0
		}
	}
}

#Yugoslavia pressured by Germany - third event
country_event = {
	id = DOD_yugoslavia.35
	title = DOD_yugoslavia.31.t
	desc = DOD_yugoslavia.35.desc
	picture = GFX_report_event_german_troops_paris
	
	is_triggered_only = yes
		
	option = { # not that bad
		name = DOD_yugoslavia.35.a
	}
}

#Yugoslavia pressured by Germany - War!
country_event = {
	id = DOD_yugoslavia.36
	title = DOD_yugoslavia.36.t
	desc = DOD_yugoslavia.36.desc
	picture = GFX_report_event_military_planning
	
	is_triggered_only = yes
	fire_only_once = yes
	
	trigger = {
		tag = GER
		YUG = {
			is_in_faction = no 
			exists = yes
			NOT = {
				focus_progress = { focus = YUG_join_axis progress > 0 } #that would just be mean
			}
		}
	}

	option = { # put the squeeze on them
		name = DOD_yugoslavia.36.a
		ai_chance = {
			factor = 100
		}
		declare_war_on = {
			target = YUG
			type = puppet_wargoal_focus
		}	
	}	
	
	option = { # not interested
		name = DOD_yugoslavia.36.b
		ai_chance = {
			factor = 0
		}	
	}
}



#Yugoslavia pressured by Britain - Munich
country_event = {
	id = DOD_yugoslavia.42
	title = DOD_yugoslavia.30.t
	desc = DOD_yugoslavia.42.desc
	picture = GFX_report_event_prince_paul_yugo
	
	is_triggered_only = yes
	
	option = { # put the squeeze on them
		name = DOD_yugoslavia.42.a
		ai_chance = {
			factor = 70
		}
		YUG = { country_event = DOD_yugoslavia.43 }
		
	}	
	option = { # not interested
		name = DOD_yugoslavia.42.b
		ai_chance = {
			factor = 30
		}
	}
}

#Yugoslavia pressured by Britain
country_event = {
	id = DOD_yugoslavia.43
	title = DOD_yugoslavia.41.t
	desc = DOD_yugoslavia.43.desc
	picture = GFX_report_event_prince_paul_yugo
	
	is_triggered_only = yes
		
	option = { # not that bad yet
		name = DOD_yugoslavia.43.a
	}	
}

#fighter competition - initial choice for Yugoslavia
country_event = {
	id = DOD_yugoslavia.150
	title = DOD_hungary.150.t
	desc = DOD_hungary.150.desc 
	picture = GFX_report_event_hurricane
	
	is_triggered_only = yes

	option = {# light fighter
		name = DOD_hungary.150.a
		trigger = {
			OR = {
				GER = {
					is_available_fighter_YUG = yes
				}
				FRA = {
					is_available_fighter_YUG = yes
				}
				ITA = {
					is_available_fighter_YUG = yes
				}
				ENG = {
					is_available_fighter_YUG = yes
				}
				USA = {
					is_available_fighter_YUG = yes
				}
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				has_tech = fighter1
				add = -10
			}
			modifier = {
				has_tech = fighter2
				add = -10
			}
			modifier = {
				has_tech = fighter3
				factor = 0
			}
		}
		country_event = DOD_yugoslavia.151 
		
	}

	option = {# heavy fighter
		name = DOD_hungary.150.b
		trigger = {
			OR = {
				GER = {
					is_available_heavy_fighter_YUG = yes
				}
				FRA = {
					is_available_heavy_fighter_YUG = yes
				}
				ITA = {
					is_available_heavy_fighter_YUG = yes
				}
				ENG = {
					is_available_heavy_fighter_YUG = yes
				}
				USA = {
					is_available_heavy_fighter_YUG = yes
				}
			}
		}
		country_event = DOD_yugoslavia.152
		ai_chance = {
			factor = 50
			modifier = {
				has_tech = heavy_fighter2
				add = -10
			}
			modifier = {
				has_tech = heavy_fighter3
				factor = 0
			}
		}
	}
}

#Fighter competition - Yugoslavia is looking for a light fighter
country_event = {
	id = DOD_yugoslavia.151
	title = DOD_hungary.151.t
	desc = {
		text = DOD_hungary.151.desc_light_fighter
		trigger = {
			NOT = { 
				has_country_flag = GER_fighter_refused
				has_country_flag = ENG_fighter_refused
				has_country_flag = USA_fighter_refused
				has_country_flag = FRA_fighter_refused
				has_country_flag = ITA_fighter_refused
			} 
		}
	}
	desc = {
		text = DOD_hungary.151.desc_light_fighter_refused
		trigger = {
			OR = {
		 		has_country_flag = GER_fighter_refused
				has_country_flag = ENG_fighter_refused
				has_country_flag = USA_fighter_refused
				has_country_flag = FRA_fighter_refused
				has_country_flag = ITA_fighter_refused
		 	}
		}
	}
	picture = GFX_report_event_hurricane
	
	is_triggered_only = yes

	option = {# Select German Plane
		name = DOD_hungary.151.a
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = GER
				factor = 10
			}
			modifier = {
				GER = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				GER = {
					has_tech = tech_me_109_fighter_equipment_1
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = tech_me_109_late_fighter_equipment_1
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = tech_me_109_late_fighter_equipment_4
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					GER = { has_tech = tech_me_109_fighter_equipment_1}
					YUG = { NOT = { has_tech = fighter1 } }
				}
				AND = {
					GER = { has_tech = tech_me_109_late_fighter_equipment_1}
					YUG = { NOT = { has_tech = fighter2 } }
				}
				AND = {
					GER = { has_tech = tech_me_109_late_fighter_equipment_4}
					YUG = { NOT = { has_tech = fighter3 } }
				}
			}
			NOT = { has_war_with = GER }
			NOT = { has_country_flag = GER_fighter_refused }
		}
		GER = { country_event = DOD_yugoslavia.153 }	
	}

	option = {# select italian plane
		name = DOD_hungary.151.b
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ITA
				factor = 10
			}
			modifier = {
				ITA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ITA = {
					OR = {
						has_tech = tech_cr_41_fighter_equipment_1 #ita
						has_tech = tech_cr_33_fighter_equipment_1 #ita
						has_tech = tech_cr_42_fighter_equipment_1 #ita
						has_tech = tech_g50_fighter_equipment_1 #ita	
					}
				}
				add = 10
			}
			modifier = {
				ITA = {
					OR = {
						has_tech = tech_g50v_fighter_equipment_1 #ita 
						has_tech = tech_ss4_fighter_equipment_1 #ita
					}
				}
				add = 10
			}
			modifier = {
				ITA = {
					OR = {
						has_tech = tech_sai403_fighter_equipment_1 #ita
						has_tech = tech_g56_fighter_equipment_1 #ita
					}
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ITA = {
						OR = {
							has_tech = tech_cr_41_fighter_equipment_1 #ita
							has_tech = tech_cr_33_fighter_equipment_1 #ita
							has_tech = tech_cr_42_fighter_equipment_1 #ita
							has_tech = tech_g50_fighter_equipment_1 #ita	
						}
					}
					YUG = { NOT = { has_tech = fighter1 } }
				}
				AND = {
					ITA = {
						OR = {
							has_tech = tech_g50v_fighter_equipment_1 #ita 
							has_tech = tech_ss4_fighter_equipment_1 #ita
						}
					}
					YUG = { NOT = { has_tech = fighter2 } }
				}
				AND = {
					ITA = {
						OR = {
							has_tech = tech_sai403_fighter_equipment_1 #ita
							has_tech = tech_g56_fighter_equipment_1 #ita
						}
					}
					YUG = { NOT = { has_tech = fighter3 } }
				}
			}
			NOT = { has_war_with = ITA }
			NOT = { has_country_flag = ITA_fighter_refused }
		}
		ITA = { country_event = DOD_yugoslavia.153 }	
	}

	option = {# select french plane
		name = DOD_hungary.151.c
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = FRA
				factor = 10
			}
			modifier = {
				FRA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				FRA = {
					has_tech = tech_ms_405_fighter_equipment_1
				}
				add = 10
			}
			modifier = {
				FRA = {
					has_tech = tech_ms_410_fighter_equipment_1
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					FRA = { has_tech = tech_ms_405_fighter_equipment_1}
					YUG = { NOT = { has_tech = fighter1 } }
				}
				AND = {
					FRA = { has_tech = tech_ms_410_fighter_equipment_1}
					YUG = { NOT = { has_tech = fighter2 } }
				}				
			}
			YUG = { NOT = { has_tech = fighter3 } }
			NOT = { has_war_with = FRA }
			NOT = { has_country_flag = FRA_fighter_refused }
			
		}
		FRA = { country_event = DOD_yugoslavia.153 }	
	}
	option = {# select british plane
		name = DOD_hungary.151.d
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ENG
				factor = 10
			}
			modifier = {
				ENG = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ENG = {
					has_tech = tech_spitfire_equipment_1
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = tech_spitfire_equipment_2
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = tech_griffon_spitfire_equipment_1
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ENG = { has_tech = tech_spitfire_equipment_1}
					YUG = { NOT = { has_tech = fighter1 } }
				}
				AND = {
					ENG = { has_tech = tech_spitfire_equipment_2}
					YUG = { NOT = { has_tech = fighter2 } }
				}
				AND = {
					ENG = { has_tech = tech_griffon_spitfire_equipment_1}
					YUG = { NOT = { has_tech = fighter3 } }
				}
			}
			NOT = { has_war_with = ENG }
			NOT = { has_country_flag = ENG_fighter_refused }
		}
		ENG = { country_event = DOD_yugoslavia.153 }	
	}
	option = {# select american plane
		name = DOD_hungary.151.e
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = USA
				factor = 10
			}
			modifier = {
				USA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				USA = {
					has_tech = tech_curtiss_p36_equipment_1
				}
				add = 10
			}
			modifier = {
				USA = {
					OR = {
						has_tech = tech_curtiss_p40_equipment_2	#usa
						has_tech = tech_northamerican_mustang_equipment_1	#usa 
					}
				}
				add = 10
			}
			modifier = {
				USA = {
					has_tech = tech_northamerican_p51d_equipment_1
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					USA = { has_tech = tech_curtiss_p36_equipment_1}
					YUG = { NOT = { has_tech = fighter1 } }
				}
				AND = {
					USA = {
						OR = {
							has_tech = tech_curtiss_p40_equipment_2	#usa
							has_tech = tech_northamerican_mustang_equipment_1	#usa 
						}
					}
					YUG = { NOT = { has_tech = fighter2 } }
				}
				AND = {
					USA = { has_tech = tech_northamerican_p51d_equipment_1 }
					YUG = { NOT = { has_tech = fighter3 } }
				}
			}
			NOT = { has_war_with = USA }
			NOT = { has_country_flag = USA_fighter_refused }
			NOT = { #to prevent overflow issues
				AND = {
					GER = {
						is_available_fighter_YUG = yes
					}
					FRA = {
						is_available_fighter_YUG = yes
					}
					ITA = {
						is_available_fighter_YUG = yes
					}
					ENG = {
						is_available_fighter_YUG = yes
					}
				}
			}
		}
		USA = { country_event = DOD_yugoslavia.153 }	
	}
	option = {# failsafe
		name = DOD_hungary.151.f	
		trigger = {
			OR = {
				has_country_flag = GER_fighter_refused
				has_country_flag = ITA_fighter_refused
				has_country_flag = ENG_fighter_refused
				has_country_flag = FRA_fighter_refused
				has_country_flag = USA_fighter_refused
			}
		}
		air_experience = 25
	}

}

#Fighter competition - Yugoslavia is looking for a heavy fighter
country_event = {
	id = DOD_yugoslavia.152
	title = DOD_hungary.152.t
	desc = {
		text = DOD_hungary.152.desc_heavy_fighter
		trigger = {
			NOT = { 
				has_country_flag = GER_heavy_fighter_refused
				has_country_flag = ENG_heavy_fighter_refused
				has_country_flag = USA_heavy_fighter_refused
				has_country_flag = FRA_heavy_fighter_refused
				has_country_flag = ITA_heavy_fighter_refused
			} 
		}
	}
	desc = {
		text = DOD_hungary.152.desc_heavy_fighter_refused
		trigger = {
			OR = {
		 		has_country_flag = GER_heavy_fighter_refused
				has_country_flag = ENG_heavy_fighter_refused
				has_country_flag = USA_heavy_fighter_refused
				has_country_flag = FRA_heavy_fighter_refused
				has_country_flag = ITA_heavy_fighter_refused
		 	}
		}
	}
	picture = GFX_report_event_hurricane
	
	is_triggered_only = yes

	option = {# Select German Plane
		name = DOD_hungary.152.a
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = GER
				factor = 10
			}
			modifier = {
				GER = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				GER = {
					OR = {
						has_tech = tech_bf_110_fighter_equipment_1 #ger
						has_tech = tech_fw_187_fighter_equipment_1 #ger
						has_tech = tech_me_210_fighter_equipment_1 #ger
					}
				}
				add = 10
			}
			modifier = {
				GER = {
					OR = {
						has_tech = tech_bf_109_z_fighter_equipment_1 #ger
						has_tech = tech_do_335_fighter_equipment_1 #ger
					}
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					GER = {
						OR = {
							has_tech = tech_bf_110_fighter_equipment_3 #ger
							has_tech = tech_fw_187_fighter_equipment_1 #ger
							has_tech = tech_me_210_fighter_equipment_1 #ger
						}
					}
					YUG = { NOT = { has_tech = heavy_fighter2 } }
				}
				AND = {
					GER = {
						OR = {
							has_tech = tech_bf_109_z_fighter_equipment_1 #ger
							has_tech = tech_do_335_fighter_equipment_1 #ger
						}
					}
					YUG = { NOT = { has_tech = heavy_fighter3 } }
				}
			}
			NOT = { has_war_with = GER }
			NOT = { has_country_flag = GER_heavy_fighter_refused }
		}
		GER = { country_event = DOD_yugoslavia.154 }	
	}

	option = {# select italian plane
		name = DOD_hungary.152.b
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ITA
				factor = 10
			}
			modifier = {
				ITA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ITA = {
					OR = {
						has_tech = tech_cr25_fighter_equipment_1 #ita
						has_tech = tech_ro57_fighter_equipment_1 #ita
					}
				}
				add = 10
			}
			modifier = {
				ITA = {
					OR = {
						has_tech = tech_sm91_fighter_equipment_1 #ita
						has_tech = tech_sm92_fighter_equipment_1 #ita
					}
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ITA = {
						OR = {
							has_tech = tech_cr25_fighter_equipment_1 #ita
							has_tech = tech_ro57_fighter_equipment_1 #ita
						}
					}
					YUG = { NOT = { has_tech = heavy_fighter2 } }
				}
				AND = {
					ITA = {
						OR = {
							has_tech = tech_sm91_fighter_equipment_1 #ita
							has_tech = tech_sm92_fighter_equipment_1 #ita
						}
					}
					YUG = { NOT = { has_tech = heavy_fighter3 } }
				}
			}
			NOT = { has_war_with = ITA }
			NOT = { has_country_flag = ITA_heavy_fighter_refused }
		}
		ITA = { country_event = DOD_yugoslavia.154 }	
	}

	option = {# select french plane
		name = DOD_hungary.152.c
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = FRA
				factor = 10
			}
			modifier = {
				FRA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				FRA = {
					has_tech = tech_nc_600_fighter_equipment_1
				}
				add = 10
			}
			modifier = {
				FRA = {
					has_tech = tech_arsenal_vb10_fighter_equipment_1
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					FRA = { has_tech = tech_nc_600_fighter_equipment_1}
					YUG = { NOT = { has_tech = heavy_fighter2 } }
				}
				AND = {
					FRA = { has_tech = tech_arsenal_vb10_fighter_equipment_1}
					YUG = { NOT = { has_tech = heavy_fighter3 } }
				}
			}
			NOT = { has_war_with = FRA }
			NOT = { has_country_flag = FRA_heavy_fighter_refused }
			
		}
		FRA = { country_event = DOD_yugoslavia.154 }	
	}
	option = {# select british plane
		name = DOD_hungary.152.d
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ENG
				factor = 10
			}
			modifier = {
				ENG = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ENG = {
					has_tech = tech_bristol_beaufighter_equipment_1
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = tech_bristol_beaufighter_equipment_2
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ENG = { has_tech = tech_bristol_beaufighter_equipment_1}
					YUG = { NOT = { has_tech = heavy_fighter2 } }
				}
				AND = {
					ENG = { has_tech = tech_bristol_beaufighter_equipment_2}
					YUG = { NOT = { has_tech = heavy_fighter3 } }
				}
			}
			NOT = { has_war_with = ENG }
			NOT = { has_country_flag = ENG_heavy_fighter_refused }
		}
		ENG = { country_event = DOD_yugoslavia.154 }	
	}
	option = {# select american plane
		name = DOD_hungary.152.e
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = USA
				factor = 10
			}
			modifier = {
				USA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				USA = {
					OR = {
						has_tech = tech_bell_yfm1_equipment_1 #usa
						has_tech = tech_lockheed_p38_equipment_1 #usa
					}
				}
				add = 10
			}
			modifier = {
				USA = { 
					OR = {
						has_tech = tech_lockheed_p38l_equipment_1 #usa
						has_tech = tech_northamerican_p82_equipment_1 #usa		
					}
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					USA = { 
						OR = {
							has_tech = tech_bell_yfm1_equipment_1 #usa
							has_tech = tech_lockheed_p38_equipment_1 #usa
						}
					}
					YUG = { NOT = { has_tech = heavy_fighter2 } }
				}
				AND = {
					USA = { 
						OR = {
							has_tech = tech_lockheed_p38l_equipment_1 #usa
							has_tech = tech_northamerican_p82_equipment_1 #usa		
						}
					}
					YUG = { NOT = { has_tech = heavy_fighter3 } }
				}
			}
			NOT = { has_war_with = USA }
			NOT = { has_country_flag = USA_heavy_fighter_refused }
			NOT = { #to prevent overflow issues
				AND = {
					GER = {
						is_available_heavy_fighter_YUG = yes
					}
					FRA = {
						is_available_heavy_fighter_YUG = yes
					}
					ITA = {
						is_available_heavy_fighter_YUG = yes
					}
					ENG = {
						is_available_heavy_fighter_YUG = yes
					}
				}
			}
		}
		USA = { country_event = DOD_yugoslavia.154 }	
	}
	option = {# failsafe
		name = DOD_hungary.151.f	
		trigger = {
			OR = {
				has_country_flag = GER_heavy_fighter_refused
				has_country_flag = ITA_heavy_fighter_refused
				has_country_flag = ENG_heavy_fighter_refused
				has_country_flag = FRA_heavy_fighter_refused
				has_country_flag = USA_heavy_fighter_refused
			}
		}
		air_experience = 50
	}

}

#fighter competition - light fighter competition winner gets a choice whether to permit license production
country_event = {
	id = DOD_yugoslavia.153
	title = DOD_hungary.153.t
	desc = DOD_hungary.153.desc 
	picture = GFX_report_event_hurricane
	
	is_triggered_only = yes

	option = {# certainly
		name = DOD_hungary.153.a
		ai_chance = {
			factor = 90
			modifier = {
				has_war = yes
				factor = 0.5
			}
		}
		YUG = { country_event = DOD_yugoslavia.155 }
		air_experience = 20
		add_relation_modifier = {
			target = YUG
			modifier = free_license # name is from static_modifiers.txt
		}
		#GER
		if = {
			limit = {
				has_tech = tech_me_109_fighter_equipment_1
				NOT = { has_tech = tech_me_109_late_fighter_equipment_1 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = me_109_fighter_equipment_1
					
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_me_109_late_fighter_equipment_1
				NOT = { has_tech = tech_me_109_late_fighter_equipment_4 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = me_109_late_fighter_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_me_109_late_fighter_equipment_4
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = me_109_late_fighter_equipment_4
				}
				cost_factor = 0
			}
		}
		#SOV
		if = {
			limit = {
				has_tech = tech_i_152_equipment_1
				NOT = { has_tech = tech_yak_1_equipment_1 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = i_152_equipment_1
					
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_yak_1_equipment_1
				NOT = { has_tech = tech_lagg_7_equipment_1 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = yak_1_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_lagg_7_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = lagg_7_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_i_16_equipment_3
				NOT = { has_tech = tech_lagg_1_equipment_1 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = i_16_equipment_3
					
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_lagg_1_equipment_1
				NOT = { has_tech = tech_yak_3_equipment_1 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = lagg_1_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_yak_3_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = yak_3_equipment_1
				}
				cost_factor = 0
			}
		}
		#ENG
		if = {
			limit = {
				has_tech = tech_spitfire_equipment_1
				NOT = { has_tech = tech_spitfire_equipment_2 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = spitfire_equipment_1
					
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_spitfire_equipment_2
				NOT = { has_tech = tech_griffon_spitfire_equipment_1 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = spitfire_equipment_2
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_griffon_spitfire_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = griffon_spitfire_equipment_1
				}
				cost_factor = 0
			}
		}
		#ITA
		if = {
			limit = {
				has_tech = tech_cr_41_fighter_equipment_1
				NOT = { has_tech = tech_g50v_fighter_equipment_1 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = cr_41_fighter_equipment_1
					
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_g50v_fighter_equipment_1
				NOT = { has_tech = tech_sai403_fighter_equipment_1 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = g50v_fighter_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_sai403_fighter_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = sai403_fighter_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_cr_42_fighter_equipment_1
				NOT = { has_tech = tech_cr_42_daimler_fighter_equipment_1 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = cr_42_fighter_equipment_1
					
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_cr_42_daimler_fighter_equipment_1
				NOT = { has_tech = tech_g56_fighter_equipment_1 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = cr_42_daimler_fighter_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_cr_33_fighter_equipment_1
				NOT = { has_tech = tech_ss4_fighter_equipment_1 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = cr_33_fighter_equipment_1
					
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_ss4_fighter_equipment_1
				NOT = { has_tech = tech_g56_fighter_equipment_1 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = ss4_fighter_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_g56_fighter_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = g56_fighter_equipment_1
				}
				cost_factor = 0
			}
		}
		#USA
		if = {
			limit = {
				has_tech = tech_curtiss_p36_equipment_1
				NOT = { 
					has_tech = tech_curtiss_p40_equipment_2 
					has_tech = tech_northamerican_mustang_equipment_1 
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = curtiss_p36_equipment_1
					
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_northamerican_mustang_equipment_1
				NOT = { has_tech = tech_northamerican_p51d_equipment_1 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = northamerican_mustang_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_curtiss_p40_equipment_2
				NOT = { has_tech = tech_northamerican_p51d_equipment_1 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = curtiss_p40_equipment_2
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_northamerican_p51d_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = northamerican_p51d_equipment_1
				}
				cost_factor = 0
			}
		}
	}

	option = {# no
		name = DOD_hungary.153.b
		ai_chance = {
			factor = 10
			modifier = {
				is_in_faction_with = YUG
				factor = 0
			}
		}
		if = {
			limit = { tag = GER }
			YUG = { set_country_flag = GER_fighter_refused }
		}
		if = {
			limit = { tag = ITA }
			YUG = { set_country_flag = ITA_fighter_refused }
		}
		if = {
			limit = { tag = FRA }
			YUG = { set_country_flag = FRA_fighter_refused }
		}
		if = {
			limit = { tag = ENG }
			YUG = { set_country_flag = ENG_fighter_refused }
		}
		if = {
			limit = { tag = USA }
			YUG = { set_country_flag = USA_fighter_refused }
		}
		YUG = { country_event = DOD_yugoslavia.151 }
		reverse_add_opinion_modifier = { target = YUG modifier = refused_help }
	}
}

#fighter competition - heavy fighter competition winner gets a choice whether to permit license production
country_event = {
	id = DOD_yugoslavia.154
	title = DOD_hungary.153.t
	desc = DOD_hungary.154.desc 
	picture = GFX_report_event_hurricane
	
	is_triggered_only = yes

	option = {# certainly
		name = DOD_hungary.153.a
		ai_chance = {
			factor = 90
			modifier = {
				has_war = yes
				factor = 0.5
			}
		}
		YUG = { country_event = DOD_yugoslavia.155 }
		air_experience = 20
		#GER
		if = {
			limit = {
				has_tech = tech_bf_110_fighter_equipment_3
				NOT = { 
					has_tech = tech_bf_109_z_fighter_equipment_1 
					has_tech = tech_do_335_fighter_equipment_1
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = bf_110_fighter_equipment_3	
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_fw_187_fighter_equipment_1
				NOT = { 
					has_tech = tech_bf_109_z_fighter_equipment_1 
					has_tech = tech_do_335_fighter_equipment_1
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = fw_187_fighter_equipment_1	
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_me_210_fighter_equipment_1
				NOT = { 
					has_tech = tech_bf_109_z_fighter_equipment_1 
					has_tech = tech_do_335_fighter_equipment_1
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = me_210_fighter_equipment_1	
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_bf_109_z_fighter_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = bf_109_z_fighter_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_do_335_fighter_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = do_335_fighter_equipment_1
				}
				cost_factor = 0
			}
		}
		#ITA
		if = {
			limit = {
				has_tech = tech_cr25_fighter_equipment_1
				NOT = { 
					has_tech = tech_sm91_fighter_equipment_1 
					has_tech = tech_sm92_fighter_equipment_1
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = cr25_fighter_equipment_1	
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_ro57_fighter_equipment_1
				NOT = { 
					has_tech = tech_sm91_fighter_equipment_1
					has_tech = tech_sm92_fighter_equipment_1
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = ro57_fighter_equipment_1	
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_sm91_fighter_equipment_1
				NOT = { 
					has_tech = tech_sm92_fighter_equipment_1
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = sm91_fighter_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_sm92_fighter_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = sm92_fighter_equipment_1
				}
				cost_factor = 0
			}
		}
		#SOV
		if = {
			limit = {
				has_tech = tech_pe_1_fighter_equipment_1
				NOT = { 
					has_tech = tech_mig_5_fighter_equipment_1
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = pe_1_fighter_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_mig_5_fighter_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = mig_5_fighter_equipment_1	
				}
				cost_factor = 0
			}
		}
		#FRA
		if = {
			limit = {
				has_tech = tech_nc_600_fighter_equipment_1
				NOT = { 
					has_tech = tech_arsenal_vb10_fighter_equipment_1
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = nc_600_fighter_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_arsenal_vb10_fighter_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = arsenal_vb10_fighter_equipment_1	
				}
				cost_factor = 0
			}
		}
		#ENG
		if = {
			limit = {
				has_tech = tech_bristol_beaufighter_equipment_1
				NOT = { 
					has_tech = tech_bristol_beaufighter_equipment_2
					has_tech = tech_mosquito_hvf_equipment_1
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = bristol_beaufighter_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_bristol_beaufighter_equipment_2
				NOT = { 
					has_tech = tech_mosquito_hvf_equipment_1
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = bristol_beaufighter_equipment_2
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_mosquito_hvf_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = mosquito_hvf_equipment_1	
				}
				cost_factor = 0
			}
		}
		#USA
		if = {
			limit = {
				has_tech = tech_bell_yfm1_equipment_1
				NOT = { 
					has_tech = tech_lockheed_p38l_equipment_1
					has_tech = tech_northamerican_p82_equipment_1
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = bell_yfm1_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_lockheed_p38_equipment_1
				NOT = { 
					has_tech = tech_lockheed_p38l_equipment_1
					has_tech = tech_northamerican_p82_equipment_1
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = tech_lockheed_p38_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_lockheed_p38l_equipment_1
				NOT = { 
					has_tech = tech_northamerican_p82_equipment_1
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = lockheed_p38l_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_northamerican_p82_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = northamerican_p82_equipment_1
				}
				cost_factor = 0
			}
		}		
	}

	option = {# no
		name = DOD_hungary.153.b
		ai_chance = {
			factor = 10
			modifier = {
				is_in_faction_with = YUG
				factor = 0
			}
		}
		if = {
			limit = { tag = GER }
			YUG = { set_country_flag = GER_heavy_fighter_refused }
		}
		if = {
			limit = { tag = ITA }
			YUG = { set_country_flag = ITA_heavy_fighter_refused }
		}
		if = {
			limit = { tag = FRA }
			YUG = { set_country_flag = FRA_heavy_fighter_refused }
		}
		if = {
			limit = { tag = ENG }
			YUG = { set_country_flag = ENG_heavy_fighter_refused }
		}
		if = {
			limit = { tag = USA }
			YUG = { set_country_flag = USA_heavy_fighter_refused }
		}
		YUG = { country_event = DOD_yugoslavia.152 }
		reverse_add_opinion_modifier = { target = YUG modifier = refused_help }
	}
}

#fighter competition - license production approved
country_event = {
	id = DOD_yugoslavia.155
	title = DOD_hungary.155.t
	desc = DOD_hungary.155.desc 
	picture = GFX_report_event_hurricane
	
	is_triggered_only = yes

	option = {# neat
		name = DOD_hungary.155.a
		
	}
}


#bomber competition - initial choice for Yugoslavia
country_event = {
	id = DOD_yugoslavia.160
	title = DOD_hungary.160.t
	desc = DOD_hungary.160.desc 
	picture = GFX_report_event_bomber_factory
	
	is_triggered_only = yes

	option = {# CAS
		name = DOD_hungary.160.a
		trigger = {
			OR = {
				GER = {
					is_available_cas_YUG = yes
				}
				FRA = {
					is_available_cas_YUG = yes
				}
				ITA = {
					is_available_cas_YUG = yes
				}
				ENG = {
					is_available_cas_YUG = yes
				}
				USA = {
					is_available_cas_YUG = yes
				}
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				has_tech = CAS1
				add = -10
			}
			modifier = {
				has_tech = CAS2
				add = -10
			}
			modifier = {
				has_tech = CAS3
				factor = 0
			}
		}
		country_event = DOD_yugoslavia.161 	
	}

	option = {# TAC
		name = DOD_hungary.160.b
		trigger = {
			OR = {
				GER = {
					is_available_tac_YUG = yes
				}
				FRA = {
					is_available_tac_YUG = yes
				}
				ITA = {
					is_available_tac_YUG = yes
				}
				ENG = {
					is_available_tac_YUG = yes
				}
				USA = {
					is_available_tac_YUG = yes
				}
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				has_tech = early_bomber
				add = -1
			}
			modifier = {
				has_tech = tactical_bomber1
				add = -10
			}
			modifier = {
				has_tech = tactical_bomber2
				add = -10
			}
			modifier = {
				has_tech = tactical_bomber3
				factor = 0
			}
		}
		country_event = DOD_yugoslavia.162
	}
}

#Bomber competition - Yugoslavia is looking for a CAS
country_event = {
	id = DOD_yugoslavia.161
	title = DOD_yugoslavia.161.t
	desc = {
		text = DOD_hungary.161.desc_cas
		trigger = {
			NOT = { 
				has_country_flag = GER_CAS_refused
				has_country_flag = ENG_CAS_refused
				has_country_flag = USA_CAS_refused
				has_country_flag = FRA_CAS_refused
				has_country_flag = ITA_CAS_refused
			} 
		}
	}
	desc = {
		text = DOD_hungary.161.desc_cas_refused
		trigger = {
			OR = {
		 		has_country_flag = GER_CAS_refused
				has_country_flag = ENG_CAS_refused
				has_country_flag = USA_CAS_refused
				has_country_flag = FRA_CAS_refused
				has_country_flag = ITA_CAS_refused
		 	}
		}
	}
	picture = GFX_report_event_bomber_factory
	
	is_triggered_only = yes

	option = {# Select German Plane
		name = DOD_hungary.161.a
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = GER
				factor = 10
			}
			modifier = {
				GER = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				GER = {
					OR = {
						has_tech = tech_he_118_equipment_1 #ger
						has_tech = tech_ju_87_equipment_1 #ger
					}
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = tech_ju_87_equipment_3 #ger
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = tech_fw_190_g_equipment_1 #ger
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					GER = {
						OR = {
							has_tech = tech_he_118_equipment_1 #ger
							has_tech = tech_ju_87_equipment_1 #ger
						}
					}
					YUG = { NOT = { has_tech = CAS1 } }
				}
				AND = {
					GER = { has_tech = tech_ju_87_equipment_3 }
					YUG = { NOT = { has_tech = CAS2 } }
				}
				AND = {
					GER = { has_tech = tech_fw_190_g_equipment_1 }
					YUG = { NOT = { has_tech = CAS3 } }
				}
			}
			NOT = { has_war_with = GER }
			NOT = { has_country_flag = GER_CAS_refused }
		}
		GER = { country_event = DOD_yugoslavia.163 }	
	}

	option = {# select italian plane
		name = DOD_hungary.161.b
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ITA
				factor = 10
			}
			modifier = {
				ITA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ITA = {
					has_tech = tech_ca309_light_bomber_equipment_1
				}
				add = 10
			}
			modifier = {
				ITA = {
					OR = {
						has_tech = tech_ca355_cas_equipment_1 #ita
						has_tech = tech_ba201_cas_equipment_1 #ita
					}
				}
				add = 10
			}
			modifier = {
				ITA = {
					has_tech = tech_sm93_cas_equipment_1
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ITA = { has_tech = tech_ca309_light_bomber_equipment_1}
					YUG = { NOT = { has_tech = CAS1 } }
				}
				AND = {
					ITA = {
						OR = {
							has_tech = tech_ca355_cas_equipment_1 #ita
							has_tech = tech_ba201_cas_equipment_1 #ita
						}
					}
					YUG = { NOT = { has_tech = CAS2 } }
				}
				AND = {
					ITA = { has_tech = tech_sm93_cas_equipment_1}
					YUG = { NOT = { has_tech = CAS3 } }
				}
			}
			NOT = { has_war_with = ITA }
			NOT = { has_country_flag = ITA_CAS_refused }
		}
		ITA = { country_event = DOD_yugoslavia.163 }	
	}

	option = {# select french plane
		name = DOD_hungary.161.c
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = FRA
				factor = 10
			}
			modifier = {
				FRA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				FRA = {
					has_tech = tech_breguet_691_bomber_equipment_1
				}
				add = 10
			}
			modifier = {
				FRA = {
					OR = {
						has_tech = tech_ln_42_CAS_equipment_1
						has_tech = tech_po_63_11_cas_equipment_1
					}
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					FRA = { has_tech = tech_breguet_691_bomber_equipment_1}
					YUG = { NOT = { has_tech = CAS1 } }
				}
				AND = {
					FRA = {
						OR = {
							has_tech = tech_ln_42_CAS_equipment_1
							has_tech = tech_po_63_11_cas_equipment_1
						}
					}
					YUG = { NOT = { has_tech = CAS2 } }
				}
			}
			NOT = { has_war_with = FRA }
			NOT = { has_country_flag = FRA_CAS_refused }
		}
		FRA = { country_event = DOD_yugoslavia.163 }	
	}
	option = {# select british plane
		name = DOD_hungary.161.d
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ENG
				factor = 10
			}
			modifier = {
				ENG = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ENG = {
					has_tech = tech_fairey_battle_equipment_1
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = tech_hawker_hurricane_iic_equipment_1
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = tech_hawker_hurricane_iv_equipment_1
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ENG = { has_tech = tech_fairey_battle_equipment_1}
					YUG = { NOT = { has_tech = CAS1 } }
				}
				AND = {
					ENG = { has_tech = tech_hawker_hurricane_iic_equipment_1}
					YUG = { NOT = { has_tech = CAS2 } }
				}
				AND = {
					ENG = { has_tech = tech_hawker_hurricane_iv_equipment_1}
					YUG = { NOT = { has_tech = CAS3 } }
				}
			}
			NOT = { has_war_with = ENG }
			NOT = { has_country_flag = ENG_CAS_refused }
		}
		ENG = { country_event = DOD_yugoslavia.163 }	
	}
	option = {# select american plane
		name = DOD_hungary.161.e
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = USA
				factor = 10
			}
			modifier = {
				USA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				USA = {
					OR = {
						has_tech = tech_vultee_a19_equipment_1 #usa
						has_tech = tech_curtiss_a18_equipment_1 #usa
					}
				}
				add = 10
			}
			modifier = {
				USA = {
					OR = {
						has_tech = tech_northamerican_a36_equipment_1 #usa
						has_tech = tech_vultee_a31_equipment_1 #usa
						has_tech = tech_douglas_a24_equipment_1 #usa
					}
				}
				add = 10
			}
			modifier = {
				USA = {
					OR = {
						has_tech = tech_douglas_a20_equipment_3 #usa
						has_tech = tech_beechcraft_a38_equipment_1 #usa
						has_tech = tech_curtiss_a25_equipment_1 #usa
					}
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					USA = {
						OR = {
							has_tech = tech_vultee_a19_equipment_1 #usa
							has_tech = tech_curtiss_a18_equipment_1 #usa
						}
					}
					YUG = { NOT = { has_tech = CAS1 } }
				}
				AND = {
					USA = {
						OR = {
							has_tech = tech_northamerican_a36_equipment_1 #usa
							has_tech = tech_vultee_a31_equipment_1 #usa
							has_tech = tech_douglas_a24_equipment_1 #usa
						}
					}
					YUG = { NOT = { has_tech = CAS2 } }
				}
				AND = {
					USA = {
						OR = {
							has_tech = tech_douglas_a20_equipment_3 #usa
							has_tech = tech_beechcraft_a38_equipment_1 #usa
							has_tech = tech_curtiss_a25_equipment_1 #usa
						}
					}
					YUG = { NOT = { has_tech = CAS3 } }
				}
			}
			NOT = { has_war_with = USA }
			NOT = { has_country_flag = USA_CAS_refused }
			NOT = { #to prevent overflow issues
				AND = {
					GER = {
						is_available_cas_YUG = yes
					}
					FRA = {
						is_available_cas_YUG = yes
					}
					ITA = {
						is_available_cas_YUG = yes
					}
					ENG = {
						is_available_cas_YUG = yes
					}
				}
			}
		}
		USA = { country_event = DOD_yugoslavia.163 }	
	}
	option = {# failsafe
		name = DOD_hungary.151.f	
		trigger = {
			OR = {
				has_country_flag = GER_fighter_refused
				has_country_flag = ITA_fighter_refused
				has_country_flag = ENG_fighter_refused
				has_country_flag = FRA_fighter_refused
				has_country_flag = USA_fighter_refused
			}
		}
		air_experience = 50
	}

}
#Fighter competition - Yugoslavia is looking for a tacbomber
country_event = {
	id = DOD_yugoslavia.162
	title = DOD_hungary.162.t
	desc = {
		text = DOD_hungary.162.desc_tac
		trigger = {
			NOT = { 
				has_country_flag = GER_tactical_bomber_refused
				has_country_flag = ENG_tactical_bomber_refused
				has_country_flag = USA_tactical_bomber_refused
				has_country_flag = FRA_tactical_bomber_refused
				has_country_flag = ITA_tactical_bomber_refused
			} 
		}
	}
	desc = {
		text = DOD_hungary.162.desc_tac_refused
		trigger = {
			OR = {
		 		has_country_flag = GER_tactical_bomber_refused
				has_country_flag = ENG_tactical_bomber_refused
				has_country_flag = USA_tactical_bomber_refused
				has_country_flag = FRA_tactical_bomber_refused
				has_country_flag = ITA_tactical_bomber_refused
		 	}
		}
	}
	picture = GFX_report_event_bomber_factory
	
	is_triggered_only = yes

	option = {# Select German Plane
		name = DOD_hungary.162.a
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = GER
				factor = 10
			}
			modifier = {
				GER = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				GER = {
					has_tech = tech_he_111_bomber_equipment_2
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = tech_he_111_h_bomber_equipment_1
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = tech_do_317_bomber_equipment_1
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					GER = { has_tech = tech_he_111_bomber_equipment_2}
					YUG = { NOT = { has_tech = tactical_bomber1 } }
				}
				AND = {
					GER = { has_tech = tech_he_111_h_bomber_equipment_1}
					YUG = { NOT = { has_tech = tactical_bomber2 } }
				}
				AND = {
					GER = { has_tech = tech_do_317_bomber_equipment_1}
					YUG = { NOT = { has_tech = tactical_bomber3 } }
				}
			}
			NOT = { has_war_with = GER }
			NOT = { has_country_flag = GER_tactical_bomber_refused }
		}
		GER = { country_event = DOD_yugoslavia.164 }	
	}

	option = {# select italian plane
		name = DOD_hungary.162.b
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ITA
				factor = 10
			}
			modifier = {
				ITA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ITA = {
					has_tech = tech_br20_bomber_equipment_1
				}
				add = 10
			}
			modifier = {
				ITA = {
					OR = {
						has_tech = tech_br20m_bomber_equipment_1 #ita
						has_tech = tech_z1018a_bomber_equipment_1 #ita
					}
				}
				add = 10
			}
			modifier = {
				ITA = {
					OR = {
						has_tech = tech_br20bis_bomber_equipment_1 #ita
						has_tech = tech_bz301_bomber_equipment_1 #ita
					}
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ITA = { has_tech = tech_br20_bomber_equipment_1}
					YUG = { NOT = { has_tech = tactical_bomber1 } }
				}
				AND = {
					ITA = {
						OR = {
							has_tech = tech_br20m_bomber_equipment_1 #ita
							has_tech = tech_z1018a_bomber_equipment_1 #ita
						}
					}
					YUG = { NOT = { has_tech = tactical_bomber2 } }
				}
				AND = {
					ITA = {
						OR = {
							has_tech = tech_br20bis_bomber_equipment_1 #ita
							has_tech = tech_bz301_bomber_equipment_1 #ita
						}
					}
					YUG = { NOT = { has_tech = tactical_bomber3 } }
				}
			}
			NOT = { has_war_with = ITA }
			NOT = { has_country_flag = ITA_tactical_bomber_refused }
		}
		ITA = { country_event = DOD_yugoslavia.164 }	
	}

	option = {# select french plane
		name = DOD_hungary.162.c
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = FRA
				factor = 10
			}
			modifier = {
				FRA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				FRA = {
					has_tech = tech_bloch_210_bomber_equipment_1
				}
				add = 10
			}
			modifier = {
				FRA = {
					has_tech = tech_leo_455_bomber_equipment_1
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					FRA = { has_tech = tech_bloch_210_bomber_equipment_1}
					YUG = { NOT = { has_tech = tactical_bomber1 } }
				}
				AND = {
					FRA = { has_tech = tech_leo_455_bomber_equipment_1}
					YUG = { NOT = { has_tech = tactical_bomber2 } }
				}
			}
			NOT = { has_war_with = FRA }
			NOT = { has_country_flag = FRA_tactical_bomber_refused }
		}
		FRA = { country_event = DOD_yugoslavia.164 }	
	}
	option = {# select british plane
		name = DOD_hungary.162.d
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ENG
				factor = 10
			}
			modifier = {
				ENG = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ENG = {
					has_tech = tech_vickers_wellesley_equipment_1
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = tech_bristol_beaufort_equipment_1 
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = tech_bristol_buckingham_equipment_1
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ENG = { has_tech = tech_vickers_wellesley_equipment_1}
					YUG = { NOT = { has_tech = tactical_bomber1 } }
				}
				AND = {
					ENG = { has_tech = tech_bristol_beaufort_equipment_1 }
					YUG = { NOT = { has_tech = tactical_bomber2 } }
				}
				AND = {
					ENG = { has_tech = tech_bristol_buckingham_equipment_1 }
					YUG = { NOT = { has_tech = tactical_bomber3 } }
				}
			}
			NOT = { has_war_with = ENG }
			NOT = { has_country_flag = ENG_tactical_bomber_refused }
		}
		ENG = { country_event = DOD_yugoslavia.164 }	
	}
	option = {# select american plane
		name = DOD_hungary.162.e
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = USA
				factor = 10
			}
			modifier = {
				USA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				USA = {
					has_tech = tech_douglas_b18_equipment_1
				}
				add = 10
			}
			modifier = {
				USA = {
					has_tech = tech_martin_b26_equipment_1
				}
				add = 10
			}
			modifier = {
				USA = {
					has_tech = tech_martin_b26_equipment_3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					USA = { has_tech = tech_douglas_b18_equipment_1 }
					YUG = { NOT = { has_tech = tactical_bomber1 } }
				}
				AND = {
					USA = { has_tech = tech_martin_b26_equipment_1}
					YUG = { NOT = { has_tech = tactical_bomber2 } }
				}
				AND = {
					USA = { has_tech = tech_martin_b26_equipment_3}
					YUG = { NOT = { has_tech = tactical_bomber3 } }
				}
			}
			NOT = { has_war_with = USA }
			NOT = { has_country_flag = USA_tactical_bomber_refused }
			NOT = { #to prevent overflow issues
				AND = {
					GER = {
						is_available_tac_YUG = yes
					}
					FRA = {
						is_available_tac_YUG = yes
					}
					ITA = {
						is_available_tac_YUG = yes
					}
					ENG = {
						is_available_tac_YUG = yes
					}
				}
			}
		}
		USA = { country_event = DOD_yugoslavia.164 }	
	}
	option = {# failsafe
		name = DOD_hungary.151.f	
		trigger = {
			OR = {
				has_country_flag = GER_fighter_refused
				has_country_flag = ITA_fighter_refused
				has_country_flag = ENG_fighter_refused
				has_country_flag = FRA_fighter_refused
				has_country_flag = USA_fighter_refused
			}
		}
		air_experience = 50
	}

}

#bomber competition - CAS competition winner gets a choice whether to permit license production
country_event = {
	id = DOD_yugoslavia.163
	title = DOD_hungary.163.t
	desc = DOD_hungary.163.desc 
	picture = GFX_report_event_bomber_factory
	
	is_triggered_only = yes

	option = {# certainly
		name = DOD_hungary.163.a
		ai_chance = {
			factor = 90
			modifier = {
				has_war = yes
				factor = 0.5
			}
		}
		YUG = { country_event = DOD_yugoslavia.165 }
		air_experience = 20
		#usa
		if = {
			limit = {
				has_tech = tech_curtiss_a18_equipment_1
				NOT = { 
					has_tech = tech_vultee_a31_equipment_1
					has_tech = tech_douglas_a24_equipment_1
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = curtiss_a18_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_vultee_a19_equipment_1 
				NOT = { 
					has_tech = tech_vultee_a31_equipment_1
					has_tech = tech_douglas_a24_equipment_1
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = vultee_a19_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_vultee_a31_equipment_1
				NOT = { 
					has_tech = tech_beechcraft_a38_equipment_1
					has_tech = tech_curtiss_a25_equipment_1 
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = vultee_a31_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_douglas_a24_equipment_1
				NOT = { 
					has_tech = tech_beechcraft_a38_equipment_1
					has_tech = tech_curtiss_a25_equipment_1 
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = douglas_a24_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_beechcraft_a38_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = beechcraft_a38_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_curtiss_a25_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = curtiss_a25_equipment_1
				}
				cost_factor = 0
			}
		}
		#ger
		if = {
			limit = {
				has_tech = tech_he_118_equipment_1
				NOT = { 
					has_tech = tech_ju_87_equipment_3
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = he_118_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_ju_87_equipment_1
				NOT = { 
					has_tech = tech_ju_87_equipment_3
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = ju_87_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_ju_87_equipment_3
				NOT = { 
					has_tech = tech_fw_190_g_equipment_1
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = ju_87_equipment_3
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_fw_190_g_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = fw_190_g_equipment_1
				}
				cost_factor = 0
			}
		}
		#sov
		if = {
			limit = {
				has_tech = tech_r_10_bomber_equipment_1
				NOT = { 
					has_tech = tech_su_2_equipment_2 
					has_tech = tech_il_2_equipment_1
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = r_10_bomber_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_su_2_equipment_1
				NOT = { 
					has_tech = tech_su_2_equipment_2 
					has_tech = tech_il_2_equipment_1
				}				
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = su_2_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_su_2_equipment_2
				NOT = { 
					has_tech = tech_il_10_equipment_1
				}				
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = su_2_equipment_2
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_il_2_equipment_1
				NOT = { 
					has_tech = tech_il_10_equipment_1
				}				
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = il_2_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_il_10_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = il_10_equipment_1
				}
				cost_factor = 0
			}
		}
		#ita
		if = {
			limit = {
				has_tech = tech_ca309_light_bomber_equipment_1
				NOT = { 
					has_tech = tech_ca355_cas_equipment_1
					has_tech = tech_ba201_cas_equipment_1
				}				
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = ca309_light_bomber_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_ca355_cas_equipment_1
				NOT = { 
					has_tech = tech_sm93_cas_equipment_1
				}				
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = ca355_cas_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_ba201_cas_equipment_1
				NOT = { 
					has_tech = tech_sm93_cas_equipment_1
				}				
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = ba201_cas_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_sm93_cas_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = sm93_cas_equipment_1
				}
				cost_factor = 0
			}
		}
		#fra
		if = {
			limit = {
				has_tech = tech_breguet_691_bomber_equipment_1
				NOT = { 
					has_tech = tech_ln_42_CAS_equipment_1
					has_tech = tech_po_63_11_cas_equipment_1
				}				
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = breguet_691_bomber_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_ln_42_CAS_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = ln_42_CAS_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_po_63_11_cas_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = po_63_11_cas_equipment_1
				}
				cost_factor = 0
			}
		}
		#eng
		if = {
			limit = {
				has_tech = tech_fairey_battle_equipment_1
				NOT = { 
					has_tech = tech_hawker_hurricane_iic_equipment_1
				}				
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = fairey_battle_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_hawker_hurricane_iic_equipment_1
				NOT = { 
					has_tech = tech_hawker_hurricane_iv_equipment_1
				}				
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = hawker_hurricane_iic_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_hawker_hurricane_iv_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = hawker_hurricane_iv_equipment_1
				}
				cost_factor = 0
			}
		}
	}

	option = {# no
		name = DOD_hungary.163.b
		ai_chance = {
			factor = 10
			modifier = {
				is_in_faction_with = YUG
				factor = 0
			}
		}
		if = {
			limit = { tag = GER }
			YUG = { set_country_flag = GER_CAS_refused }
		}
		if = {
			limit = { tag = ITA }
			YUG = { set_country_flag = ITA_CAS_refused }
		}
		if = {
			limit = { tag = FRA }
			YUG = { set_country_flag = FRA_CAS_refused }
		}
		if = {
			limit = { tag = ENG }
			YUG = { set_country_flag = ENG_CAS_refused }
		}
		if = {
			limit = { tag = USA }
			YUG = { set_country_flag = USA_CAS_refused }
		}
		YUG = { country_event = DOD_yugoslavia.161 }
		reverse_add_opinion_modifier = { target = YUG modifier = refused_help }
	}
}

#bomber competition - tac bomber competition winner gets a choice whether to permit license production
country_event = {
	id = DOD_yugoslavia.164
	title = DOD_hungary.164.t
	desc = DOD_hungary.164.desc 
	picture = GFX_report_event_bomber_factory
	
	is_triggered_only = yes

	option = {# certainly
		name = DOD_hungary.164.a
		ai_chance = {
			factor = 90
			modifier = {
				has_war = yes
				factor = 0.5
			}
		}
		YUG = { country_event = DOD_yugoslavia.165 }
		air_experience = 20
		#usa
		if = {
			limit = {
				TAG = USA
				NOT = { has_tech = tech_douglas_b18_equipment_1 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = keystone_bomber_equipment_4
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_douglas_b18_equipment_1
				NOT = { has_tech = tech_martin_b26_equipment_1 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = douglas_b18_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_martin_b26_equipment_1
				NOT = { has_tech = tech_martin_b26_equipment_3 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = martin_b26_equipment_1	
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_martin_b26_equipment_3
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = martin_b26_equipment_3
				}
				cost_factor = 0
			}
		}
		#ger
		if = {
			limit = {
				TAG = GER
				NOT = { has_tech = tech_he_111_bomber_equipment_2 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = he_111_bomber_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_he_111_bomber_equipment_2
				NOT = { has_tech = tech_he_111_h_bomber_equipment_1 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = he_111_bomber_equipment_2
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_he_111_h_bomber_equipment_1
				NOT = { has_tech = tech_do_317_bomber_equipment_1 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = he_111_h_bomber_equipment_1	
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_do_317_bomber_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = do_317_bomber_equipment_1
				}
				cost_factor = 0
			}
		}
		#ita
		if = {
			limit = {
				TAG = ITA
				NOT = { has_tech = tech_br20_bomber_equipment_1 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = ca133_light_bomber_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_br20_bomber_equipment_1
				NOT = { 
					has_tech = tech_br20m_bomber_equipment_1
					has_tech = tech_z1018a_bomber_equipment_1
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = br20_bomber_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_br20m_bomber_equipment_1
				NOT = { 
					has_tech = tech_br20bis_bomber_equipment_1
					has_tech = tech_bz301_bomber_equipment_1
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = br20m_bomber_equipment_1	
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_z1018a_bomber_equipment_1
				NOT = { 
					has_tech = tech_br20bis_bomber_equipment_1
					has_tech = tech_bz301_bomber_equipment_1
				}
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = z1018a_bomber_equipment_1	
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_br20bis_bomber_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = br20bis_bomber_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_bz301_bomber_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = bz301_bomber_equipment_1
				}
				cost_factor = 0
			}
		}
		#eng
		if = {
			limit = {
				TAG = ENG
				NOT = { has_tech = tech_vickers_wellesley_equipment_1 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = vickers_valentia_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_vickers_wellesley_equipment_1
				NOT = { has_tech = tech_bristol_beaufort_equipment_1 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = vickers_wellesley_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_bristol_beaufort_equipment_1
				NOT = { has_tech = tech_bristol_buckingham_equipment_1 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = bristol_beaufort_equipment_1	
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_bristol_buckingham_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = bristol_buckingham_equipment_1
				}
				cost_factor = 0
			}
		}
		#fra
		if = {
			limit = {
				TAG = FRA
				NOT = { has_tech = tech_bloch_210_bomber_equipment_1 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = bloch_200_bomber_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tech_bloch_210_bomber_equipment_1
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = bloch_210_bomber_equipment_1
				}
				cost_factor = 0
			}
		}
	}

	option = {# no
		name = DOD_hungary.164.b
		ai_chance = {
			factor = 10
			modifier = {
				is_in_faction_with = YUG
				factor = 0
			}
		}
		if = {
			limit = { tag = GER }
			YUG = { set_country_flag = GER_tactical_bomber_refused }
		}
		if = {
			limit = { tag = ITA }
			YUG = { set_country_flag = ITA_tactical_bomber_refused }
		}
		if = {
			limit = { tag = FRA }
			YUG = { set_country_flag = FRA_tactical_bomber_refused }
		}
		if = {
			limit = { tag = ENG }
			YUG = { set_country_flag = ENG_tactical_bomber_refused }
		}
		if = {
			limit = { tag = USA }
			YUG = { set_country_flag = USA_tactical_bomber_refused }
		}
		YUG = { country_event = DOD_yugoslavia.162 }
		reverse_add_opinion_modifier = { target = YUG modifier = refused_help }
	}
}

#bomber competition - license production approved
country_event = {
	id = DOD_yugoslavia.165
	title = hungary.165.t
	desc = hungary.165.desc 
	picture = GFX_report_event_bomber_factory
	
	is_triggered_only = yes

	option = {# neat
		name = DOD_hungary.165.a
		
	}
}

#Serbian Anger - Choice Event
country_event = {
	id = DOD_yugoslavia.166
	title = DOD_yugoslavia.166.t
	desc = DOD_yugoslavia.166.desc 
	picture = GFX_report_event_generic_bombers
	
	is_triggered_only = yes

	option = { #Purge them
		name = DOD_yugoslavia.166.a
		set_country_flag = yug_serbian_purge
		if = { limit = { has_idea = YUG_serbian_anger }
			remove_ideas = YUG_serbian_anger
			add_political_power = 75
			add_stability = -0.012
			add_manpower = -40000
		}
		if = { limit = { has_idea = YUG_serbian_anger2 }
			remove_ideas = YUG_serbian_anger2
			add_political_power = 50
			add_stability = -0.08
			add_manpower = -30000
		}
		if = { limit = { has_idea = YUG_serbian_anger3 }
			remove_ideas = YUG_serbian_anger3
			add_political_power = 25
			add_stability = -0.04
			add_manpower = -20000
		}
	}
	
	option = { #Compromise with them
		name = DOD_yugoslavia.166.b
		custom_effect_tooltip = serbian_compromise_TT
		set_country_flag = yug_serbian_compromise
		if = { limit = { has_idea = YUG_serbian_anger }
			remove_ideas = YUG_serbian_anger
			add_political_power = -75
			add_stability = 0.12
		}
		if = { limit = { has_idea = YUG_serbian_anger2 }
			remove_ideas = YUG_serbian_anger2
			add_political_power = -50
			add_stability = 0.08
		}
		if = { limit = { has_idea = YUG_serbian_anger3 }
			remove_ideas = YUG_serbian_anger3
			add_political_power = -25
			add_stability = 0.04
		}
		add_ideas = YUG_bottled_tensions
	}
}

#Serbian Anger - Consequences of Compromise
country_event = {
	id = DOD_yugoslavia.1670
	hidden = yes 
	timeout_days = 1 
	
	fire_only_once = yes
	is_triggered_only = yes
	
	trigger = {
		#tag = YUG #EOA
		has_idea = YUG_bottled_tensions
	}
	
	immediate = {
		country_event = { id = DOD_yugoslavia.167 days = 365 } #DOD_yugoslavia.txt, mtth was 365 days
	}

}	
country_event = {
	id = DOD_yugoslavia.167
	title = DOD_yugoslavia.167.t
	desc = DOD_yugoslavia.167.desc 
	picture = GFX_report_event_generic_bombers
	
	fire_only_once = yes
	
	trigger = {
		#tag = YUG #EOA
		has_idea = YUG_bottled_tensions
	}
	
	is_triggered_only = yes
	
	#mean_time_to_happen = {
	#	days = 365
	#}
	
	option = {#We must preserve the Federal Republic!
		name = DOD_yugoslavia.167.a
		set_country_flag = yug_serbian_war
		add_stability = -0.15
		add_manpower = -300000
		#start_civil_war = { 
		#	ideology = conservatism 
		#	size = 0.4 
		#	capital = 107 
		#	states = { 108 107 906 907 901 45 908 904 917 }
		#	}
		SER = { 
			add_manpower = 300000
			add_political_power = 300
			if = {
				limit = { 
					YUG = { 
						controls_state = 904 #Prizren
						controls_state = 907 #Pristina
						controls_state = 108 #Morava
						controls_state = 107 #Serbia
						controls_state = 901 #Visegrad
						controls_state = 917 #Syrmia
						controls_state = 906 #Serbo-Banat
						controls_state = 45 #Vojvodina
						controls_state = 908 #Slavonia
						controls_state = 905 #Bosilegrad
						} 
					}
				transfer_state = 904
				transfer_state = 907
				transfer_state = 108
				transfer_state = 107
				transfer_state = 901
				transfer_state = 917
				transfer_state = 906
				transfer_state = 45
				transfer_state = 908
				transfer_state = 905
			}
			hidden_effect = {
			load_oob = "SER"
			set_stability = 0.90
			}
		}
		create_wargoal = {
			type = annex_everything
			target = SER
		}
	}
	
	option = {#Let them go
		name = DOD_yugoslavia.167.b
		custom_effect_tooltip = serbian_compromise_TT
		set_country_flag = yug_serbian_independence #create independence scripted effects for future
		add_stability = -0.10
		SER = { 
			if = {
				limit = { 
					YUG = { 
						controls_state = 904 #Prizren
						controls_state = 907 #Pristina
						controls_state = 108 #Morava
						controls_state = 107 #Serbia
						controls_state = 901 #Visegrad
						controls_state = 917 #Syrmia
						controls_state = 906 #Serbo-Banat
						controls_state = 45 #Vojvodina
						controls_state = 908 #Slavonia
						controls_state = 905 #Bosilegrad
						} 
					}
				transfer_state = 904
				transfer_state = 907
				transfer_state = 108
				transfer_state = 107
				transfer_state = 901
				transfer_state = 917
				transfer_state = 906
				transfer_state = 45
				transfer_state = 908
				transfer_state = 905
			}
			hidden_effect = {
			load_oob = "SER"
			set_stability = 0.80
			}
		}
	}
}

# Event to remove minority ideas if YUG loses a minority
country_event = {
	id = DOD_yugoslavia.168
	title = DOD_yugoslavia.168.t
	desc = DOD_yugoslavia.168.desc
	picture = GFX_report_event_german_inspect_troops
	
	trigger = { 
		#tag = YUG #EOA
		OR = {
			AND = {
				OR = { 
					has_idea = YUG_idea_slovene_nationalism
					has_idea = YUG_idea_slovene_nationalism_2
					has_idea = YUG_idea_slovene_nationalism_3
				}
				NOT = {
					owns_state = 102 #Slovenia
					owns_state = 913 #Ljubljana
				}
			}
			AND = {
				has_idea = YUG_idea_macedonian_opposition
				NOT = {
					owns_state = 106 #Macedonia
					owns_state = 903 #Debar
				}
			}
			AND = {
				OR = { 
					has_idea = YUG_idea_croatian_opposition
					has_idea = YUG_idea_croats_suppressed
				}
				NOT = {
					owns_state = 915 #Southern Dalmatia
					owns_state = 902 #Livanjski
					owns_state = 900 #Central Dalmatia
					owns_state = 103 #Northern Dalmatia
					owns_state = 916 #Fiume
					owns_state = 109 #Croatia
					owns_state = 908 #Slavonia
				}
			}
			AND = {
				OR = { 
					has_idea = YUG_serbian_anger
					has_idea = YUG_serbian_anger2
					has_idea = YUG_serbian_anger3
					has_idea = YUG_idea_serbian_general_staff
				}
				NOT = {
					owns_state = 904 #Prizren
					owns_state = 907 #Pristina
					owns_state = 108 #Morava
					owns_state = 107 #Serbia
					owns_state = 901 #Visegrad
					owns_state = 917 #Syrmia
					owns_state = 906 #Serbo-Banat
					owns_state = 45 #Vojvodina
					owns_state = 908 #Slavonia
					owns_state = 905 #Bosilegrad
				}
			}
		}
	}
	
	is_triggered_only = yes
	
	#Remove it
	option = {
		name = DOD_yugoslavia.168.a
		if = {
			limit = {
				NOT = {
					owns_state = 915 #Southern Dalmatia
					owns_state = 902 #Livanjski
					owns_state = 900 #Central Dalmatia
					owns_state = 103 #Northern Dalmatia
					owns_state = 916 #Fiume
					owns_state = 109 #Croatia
					owns_state = 908 #Slavonia
				}
			}
			remove_ideas = YUG_idea_croatian_opposition
			remove_ideas = YUG_idea_croats_suppressed
		}
		if = {
			limit = {
				NOT = {
					owns_state = 102 #Slovenia
					owns_state = 913 #Ljubljana
				}
			}
			remove_ideas = YUG_idea_slovene_nationalism
			remove_ideas = YUG_idea_slovene_nationalism_2
			remove_ideas = YUG_idea_slovene_nationalism_3
		}
		if = {
			limit = {
				NOT = {
					owns_state = 106 #Macedonia
					owns_state = 903 #Debar
				}
			}
			remove_ideas = YUG_idea_macedonian_opposition
		}
		if = {
			limit = {
				NOT = {
					owns_state = 904 #Prizren
					owns_state = 907 #Pristina
					owns_state = 108 #Morava
					owns_state = 107 #Serbia
					owns_state = 901 #Visegrad
					owns_state = 917 #Syrmia
					owns_state = 906 #Serbo-Banat
					owns_state = 45 #Vojvodina
					owns_state = 908 #Slavonia
					owns_state = 905 #Bosilegrad
				}
			}
			remove_ideas = YUG_serbian_anger
			remove_ideas = YUG_serbian_anger2
			remove_ideas = YUG_serbian_anger3
			swap_ideas = { remove_idea = YUG_idea_serbian_general_staff add_idea = YUG_idea_yugoslavian_general_staff }
		}
	}
}

# YUG asks to join Axis 
country_event = {
	id = DOD_yugoslavia.169
	title = DOD_yugoslavia.169.t
	desc = DOD_yugoslavia.169.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes
	
	#Accept
	option = {
		name = DOD_yugoslavia.169.a
		ai_chance = { factor = 100 }
		YUG = { country_event = DOD_yugoslavia.170 }
		effect_tooltip = {
			add_to_faction = YUG
			YUG = {
				add_political_power = 15
				add_stability = 0.02
				set_temp_variable = { pop = 0.03 }
				add_ruling_pop = yes
			}
		}
	}
	
	#Reject
	option = {
		name = DOD_yugoslavia.169.b
		YUG = { country_event = DOD_yugoslavia.171 }
	}
}

# GER accepts YUG's alliance request 
country_event = {
	id = DOD_yugoslavia.170
	title = DOD_yugoslavia.170.t
	desc = DOD_yugoslavia.170.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes
	
	#Excellent
	option = {
		name = DOD_yugoslavia.170.a
		GER = { add_to_faction = YUG }
		add_political_power = 15
		add_stability = 0.02
		set_temp_variable = { pop = 0.03 }
		add_ruling_pop = yes
		if = {
			limit = {
				#has_idea = anti_german_military # Prevented the coup
				NOT = { has_country_flag = removed_anti_german_military }
			}
			country_event = DOD_yugoslavia.1
		}
	}
}

# GER rejects YUG's alliance request 
country_event = {
	id = DOD_yugoslavia.171
	title = DOD_yugoslavia.171.t
	desc = DOD_yugoslavia.171.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes
	
	#Darn
	option = {
		name = DOD_yugoslavia.171.a
		add_political_power = -15
		add_stability = -0.02
		set_temp_variable = { pop = -0.03 }
		add_ruling_pop = yes
	}
	
}
