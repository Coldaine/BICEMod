POR_overseas_provinces = {

	POR_angola_overseas_province = {

		icon = infiltrate_state

		available = {
			
			has_completed_focus = POR_luso_tropicalism
			POR = {
				controls_state = 540
			}
		}

		cost = 0
		fire_only_once = yes
		days_remove = 730
		ai_will_do = {
			factor = 2
		}
		modifier = {
			political_power_gain = -0.2
			stability_weekly = -0.002
		}
		visible = {
			has_completed_focus = POR_luso_tropicalism
		}
		remove_effect = {
			country_event = lar_portugal_overseas_provinces.1
		}		
	}

	POR_mozambique_overseas_territory = {

		icon = infiltrate_state

		available = {
			has_completed_focus = POR_luso_tropicalism
			POR = {
				controls_state = 544
			}
		}

		cost = 0
		fire_only_once = yes
		days_remove = 730
		ai_will_do = {
			factor = 2
		}

		modifier = {
			political_power_gain = -0.2
			stability_weekly = -0.002
		}
		
		visible = {
			has_completed_focus = POR_luso_tropicalism
		}
		remove_effect = {			
			country_event = lar_portugal_overseas_provinces.2
		}
	}	
}

POR_arms_purchases = {

	POR_buy_artillery_in_britain = { 

		icon = generic_industry

		available = {
			ENG = {
				has_opinion = {
					target = ROOT
					value > 0
				}
			}
		}

		cost = 0
		days_remove = 90
		days_re_enable = 90
		ai_will_do = {
			factor = 0.1
			modifier = {
				OR = {
					num_of_civilian_factories < 5
					stockpile_ratio = { 
		  				archetype = artillery_equipment
		  				ratio > 3
		  			}
				}
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 10
			}
		}
		modifier = {
			civilian_factory_use = 1
		}
		visible = {
			has_completed_focus = POR_british_guns
			NOT = {
				has_war_with = ENG
			}
			country_exists = ENG
		}
		complete_effect = {
			ENG = {
				add_offsite_building = {
					type = industrial_complex
					level = 1
				}
				add_opinion_modifier = {
					target = POR
					modifier = POR_bought_guns
				}

			}
			add_opinion_modifier = {
				target = ENG
				modifier = POR_sold_guns
			}
			add_opinion_modifier = {
				target = ENG
				modifier = POR_arms_trade
			}
		}
		remove_effect = {
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 100
				producer = ENG
			}
			ENG = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
			}
		}
	}
	POR_buy_aa_in_britain = { 

		icon = generic_industry

		available = {
			ENG = {
				has_opinion = {
					target = ROOT
					value > 0
				}
				has_tech = interwar_antiair
			}
		}

		cost = 0
		days_remove = 90
		days_re_enable = 90
		ai_will_do = {
			factor = 0.1
			modifier = {
				OR = {
					num_of_civilian_factories < 5
					stockpile_ratio = { 
		  				archetype = anti_air_equipment
		  				ratio > 3
		  			}
				}
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 10
			}
		}
		modifier = {
			civilian_factory_use = 1
		}
		visible = {
			has_completed_focus = POR_british_guns
			NOT = {
				has_war_with = ENG
			}
			country_exists = ENG
		}
		complete_effect = {
			ENG = {
				add_offsite_building = {
					type = industrial_complex
					level = 1
				}
				add_opinion_modifier = {
					target = POR
					modifier = POR_bought_guns
				}
			}
			add_opinion_modifier = {
				target = ENG
				modifier = POR_sold_guns
			}
			add_opinion_modifier = {
				target = ENG
				modifier = POR_arms_trade
			}
		}
		remove_effect = {
			add_equipment_to_stockpile = {
				type = anti_air_equipment
				amount = 100
				producer = ENG
			}
			ENG = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
			}
		}
	}

	POR_buy_at_in_britain = { 

		icon = generic_industry

		available = {
			ENG = {
				has_opinion = {
					target = ROOT
					value > 0
				}
				has_tech = interwar_antitank
			}
		}

		cost = 0
		days_remove = 90
		days_re_enable = 90
		ai_will_do = {
			factor = 0.1
			modifier = {
				OR = {
					num_of_civilian_factories < 5
					stockpile_ratio = { 
		  				archetype = anti_tank_equipment
		  				ratio > 3
		  			}
				}
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 10
			}
		}
		modifier = {
			civilian_factory_use = 1
		}
		visible = {
			has_completed_focus = POR_british_guns
			NOT = {
				has_war_with = ENG
			}
			country_exists = ENG
		}
		complete_effect = {
			ENG = {
				add_offsite_building = {
					type = industrial_complex
					level = 1
				}
				add_opinion_modifier = {
					target = POR
					modifier = POR_bought_guns
				}
			}
			add_opinion_modifier = {
				target = ENG
				modifier = POR_sold_guns
			}
			add_opinion_modifier = {
				target = ENG
				modifier = POR_arms_trade
			}
		}
		remove_effect = {
			add_equipment_to_stockpile = {
				type = anti_tank_equipment
				amount = 100
				producer = ENG
			}
			ENG = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
			}
		}
	}

	POR_buy_ships_britain = {

		icon = eng_trade_unions_support

		available = {
			ENG = {
				has_war = no
				has_opinion = {
					target = ROOT
					value > 0
				}
			}
		}

		cost = 0

		ai_will_do = {
			base = 50
			modifier = {
				factor = 100
				OR = {
					ENG = { has_government = ROOT }
					AND = {
						NOT = { ENG = { has_government = fascism } }
						NOT = { has_government = fascism }
					}
				}
			}
		}
		
		visible = {
			has_completed_focus = POR_second_navy_reequipment
			ENG = {
				exists = yes
				NOT = { has_war_with = ROOT }
				has_civil_war = no
				has_capitulated = no
				owns_state = 126 #Owns London
			}
			NOT = {	has_country_flag = POR_ships_purchase_in_progress_flag }
			NOT = { has_country_flag = POR_british_ships_purchase_rejected_flag }
		}
		complete_effect = {
			ENG = {
				country_event = { id = lar_portugal_purchase_ships.1 }
			}
			set_country_flag = POR_ships_purchase_in_progress_flag
		}
	}

	POR_buy_ships_italy = {

		icon = eng_trade_unions_support

		available = {
			ITA = {
				has_war = no
				has_opinion = {
					target = ROOT
					value > 0
				}
			}
		}

		cost = 0

		ai_will_do = {
			base = 50
			modifier = {
				factor = 100
				ITA = { has_government = ROOT }
			}
		}
		
		visible = {
			has_completed_focus = POR_second_navy_reequipment
			ITA = {
				exists = yes
				NOT = { has_war_with = ROOT }
				has_civil_war = no
				has_capitulated = no
				owns_state = 846 #Owns Rome
			}
			NOT = { has_country_flag = POR_ships_purchase_in_progress_flag }
			NOT = { has_country_flag = POR_british_ships_purchase_rejected_flag }
		}
		complete_effect = {
			ITA = {
				country_event = { id = lar_portugal_purchase_ships.1 }
			}
			set_country_flag = POR_ships_purchase_in_progress_flag
		}
	}

	#Mission to track the progress of British SUBMARINES construction
	POR_british_submarines_construction_progress = {
		
		icon = generic_naval

		allowed = {
			original_tag = POR
		}

		visible = {
			has_country_flag = POR_purchase_british_submarines_flag
			has_dlc = "Man the Guns"
		}

		modifier = {
			civilian_factory_use = 2
		}

		days_remove = 365

		cancel_trigger = {
			OR = {
				NOT = { country_exists = POR }
				NOT = { country_exists = ENG }
				ENG = {
					OR = {
						has_war_with = ROOT
						has_civil_war = yes
						has_capitulated = yes
						NOT = { owns_state = 126 } #Owns London
					}
				}
			}
		}

		#On Activation
		complete_effect ={
			ENG = {
				add_offsite_building = {
					type = industrial_complex
					level = 2
				}
			}
		}

		#Fail
		cancel_effect = {
			ENG = {
				add_offsite_building = {
					type = industrial_complex
					level = -2
				}
				remove_opinion_modifier = {
					target = POR
					modifier = POR_bought_ships
				}
			}
			remove_opinion_modifier = {
				target = ENG
				modifier = POR_sold_ships
			}
			remove_opinion_modifier = {
				target = ENG
				modifier = POR_ships_trade
			}			
			clr_country_flag = POR_purchase_british_submarines_flag
			clr_country_flag = POR_ships_purchase_in_progress_flag
		}

		#Success
		remove_effect = {
			hidden_effect = { add_manpower = 600 }
			if = {
				limit = { has_dlc = "Man the Guns" }
				if = { 
					limit = {
						ENG = { has_tech = advanced_ship_hull_submarine }
					}
					hidden_effect = {
						ENG = {
							create_equipment_variant = {
								name = "Delfim II Class"				
								type = nrm_ship_hull_submarine_4
								name_group = POR_SS_HISTORICAL
								parent_version = 0
								show_position = no
								role_icon_index = 122
								modules = {
									fixed_ship_sub_hull_slot = nrm_submarine_hull_4
									fixed_ship_engine_slot = nrm_submarine_engine_D1_025
									fixed_ship_sonar_slot = nrm_submarine_sonar_3
									fixed_ship_noise_slot = nrm_submarine_noise_2
									fixed_ship_subdivision_slot = nrm_subdivision_3
									fixed_ship_damagecontrol_slot = nrm_damagecontrol_3
									fixed_ship_range_slot = nrm_range_submarine_2
									fixed_ship_radar_slot = empty
									fixed_ship_battery_slot = nrm_submarine_deckgun_4
									fixed_ship_anti_air_slot = empty
									fixed_ship_torpedo_slot = nrm_submarine_TRP_21_2_x4
									fixed_ship_torpedo_2_slot = nrm_submarine_TRP_21_2_x2
									custom_slot_1 = empty
									custom_slot_2 = empty
								}
							}
						}
					}
					POR = {
						create_equipment_variant = {
							name = "Delfim II Class"				
							type = nrm_ship_hull_submarine_4
							name_group = POR_SS_HISTORICAL
							parent_version = 0
							show_position = no
							role_icon_index = 122
							modules = {
								fixed_ship_sub_hull_slot = nrm_submarine_hull_4
								fixed_ship_engine_slot = nrm_submarine_engine_D1_025
								fixed_ship_sonar_slot = nrm_submarine_sonar_3
								fixed_ship_noise_slot = nrm_submarine_noise_2
								fixed_ship_subdivision_slot = nrm_subdivision_3
								fixed_ship_damagecontrol_slot = nrm_damagecontrol_3
								fixed_ship_range_slot = nrm_range_submarine_2
								fixed_ship_radar_slot = empty
								fixed_ship_battery_slot = nrm_submarine_deckgun_4
								fixed_ship_anti_air_slot = empty
								fixed_ship_torpedo_slot = nrm_submarine_TRP_21_2_x4
								fixed_ship_torpedo_2_slot = nrm_submarine_TRP_21_2_x2
								custom_slot_1 = empty
								custom_slot_2 = empty
							}
						}
					}
					create_ship = { type = nrm_ship_hull_submarine_4 equipment_variant = "Delfim II Class" creator = ENG }
					create_ship = { type = nrm_ship_hull_submarine_4 equipment_variant = "Delfim II Class" creator = ENG }
					create_ship = { type = nrm_ship_hull_submarine_4 equipment_variant = "Delfim II Class" creator = ENG }
				}
				else_if = { 
					limit = {
						ENG = { has_tech = improved_ship_hull_submarine }
					}
					hidden_effect = {
						ENG = {
							create_equipment_variant = {
								name = "Delfim II Class"				
								type = nrm_ship_hull_submarine_3
								name_group = POR_SS_HISTORICAL
								parent_version = 0
								show_position = no
								role_icon_index = 122
								modules = {
									fixed_ship_sub_hull_slot = nrm_submarine_hull_3
									fixed_ship_engine_slot = nrm_submarine_engine_D1_025
									fixed_ship_sonar_slot = nrm_submarine_sonar_3
									fixed_ship_noise_slot = nrm_submarine_noise_1
									fixed_ship_subdivision_slot = nrm_subdivision_3
									fixed_ship_damagecontrol_slot = nrm_damagecontrol_3
									fixed_ship_range_slot = nrm_range_submarine_2
									fixed_ship_radar_slot = empty
									fixed_ship_battery_slot = nrm_submarine_deckgun_4
									fixed_ship_anti_air_slot = empty
									fixed_ship_torpedo_slot = nrm_submarine_TRP_21_2_x4
									fixed_ship_torpedo_2_slot = nrm_submarine_TRP_21_2_x2
									custom_slot_1 = empty
									custom_slot_2 = empty
								}
							}
						}
					}
					POR = {
						create_equipment_variant = {
							name = "Delfim II Class"				
							type = nrm_ship_hull_submarine_3
							name_group = POR_SS_HISTORICAL
							parent_version = 0
							show_position = no
							role_icon_index = 122
							modules = {
								fixed_ship_sub_hull_slot = nrm_submarine_hull_3
								fixed_ship_engine_slot = nrm_submarine_engine_D1_025
								fixed_ship_sonar_slot = nrm_submarine_sonar_3
								fixed_ship_noise_slot = nrm_submarine_noise_1
								fixed_ship_subdivision_slot = nrm_subdivision_3
								fixed_ship_damagecontrol_slot = nrm_damagecontrol_3
								fixed_ship_range_slot = nrm_range_submarine_2
								fixed_ship_radar_slot = empty
								fixed_ship_battery_slot = nrm_submarine_deckgun_4
								fixed_ship_anti_air_slot = empty
								fixed_ship_torpedo_slot = nrm_submarine_TRP_21_2_x4
								fixed_ship_torpedo_2_slot = nrm_submarine_TRP_21_2_x2
								custom_slot_1 = empty
								custom_slot_2 = empty
							}
						}
					}
					create_ship = { type = nrm_ship_hull_submarine_3 equipment_variant = "Delfim II Class" creator = ENG }
					create_ship = { type = nrm_ship_hull_submarine_3 equipment_variant = "Delfim II Class" creator = ENG }
					create_ship = { type = nrm_ship_hull_submarine_3 equipment_variant = "Delfim II Class" creator = ENG }
				}
				else = {
					hidden_effect = {
						ENG = {
							create_equipment_variant = {
								name = "Delfim II Class"				
								type = nrm_ship_hull_submarine_2
								name_group = POR_SS_HISTORICAL
								parent_version = 0
								show_position = no
								role_icon_index = 122
								modules = {
									fixed_ship_sub_hull_slot = nrm_submarine_hull_2
									fixed_ship_engine_slot = nrm_submarine_engine_D1_025
									fixed_ship_sonar_slot = nrm_submarine_sonar_3
									fixed_ship_noise_slot = nrm_submarine_noise_0
									fixed_ship_subdivision_slot = nrm_subdivision_3
									fixed_ship_damagecontrol_slot = nrm_damagecontrol_3
									fixed_ship_range_slot = nrm_range_submarine_2
									fixed_ship_radar_slot = empty
									fixed_ship_battery_slot = nrm_submarine_deckgun_4
									fixed_ship_anti_air_slot = empty
									fixed_ship_torpedo_slot = nrm_submarine_TRP_21_2_x4
									fixed_ship_torpedo_2_slot = nrm_submarine_TRP_21_2_x2
									custom_slot_1 = empty
									custom_slot_2 = empty
								}
							}
						}
					}
					POR = {
						create_equipment_variant = {
							name = "Delfim II Class"				
							type = nrm_ship_hull_submarine_2
							name_group = POR_SS_HISTORICAL
							parent_version = 0
							show_position = no
							role_icon_index = 122
							modules = {
								fixed_ship_sub_hull_slot = nrm_submarine_hull_2
								fixed_ship_engine_slot = nrm_submarine_engine_D1_025
								fixed_ship_sonar_slot = nrm_submarine_sonar_3
								fixed_ship_noise_slot = nrm_submarine_noise_0
								fixed_ship_subdivision_slot = nrm_subdivision_3
								fixed_ship_damagecontrol_slot = nrm_damagecontrol_3
								fixed_ship_range_slot = nrm_range_submarine_2
								fixed_ship_radar_slot = empty
								fixed_ship_battery_slot = nrm_submarine_deckgun_4
								fixed_ship_anti_air_slot = empty
								fixed_ship_torpedo_slot = nrm_submarine_TRP_21_2_x4
								fixed_ship_torpedo_2_slot = nrm_submarine_TRP_21_2_x2
								custom_slot_1 = empty
								custom_slot_2 = empty
							}
						}
					}
					create_ship = { type = nrm_ship_hull_submarine_2 equipment_variant = "Delfim II Class" creator = ENG }
					create_ship = { type = nrm_ship_hull_submarine_2 equipment_variant = "Delfim II Class" creator = ENG }
					create_ship = { type = nrm_ship_hull_submarine_2 equipment_variant = "Delfim II Class" creator = ENG }
				}
			}

			ENG = {
				add_offsite_building = {
					type = industrial_complex
					level = -2
				}
			}
			country_event = lar_portugal_purchase_ships.4
			set_country_flag = POR_ships_purchased_flag
			clr_country_flag = POR_purchase_british_submarines_flag
			clr_country_flag = POR_ships_purchase_in_progress_flag
		}
	}

	#Mission to track the progress of Italian SUBMARINES construction
	POR_italian_submarines_construction_progress = {
		
		icon = generic_naval

		allowed = {
			original_tag = POR
		}

		visible = {
			has_country_flag = POR_purchase_italian_submarines_flag
			has_dlc = "Man the Guns"
		}

		modifier = {
			civilian_factory_use = 2
		}

		days_remove = 365

		cancel_trigger = {
			OR = {
				NOT = { country_exists = POR }
				NOT = { country_exists = ITA }
				ITA = {
					OR = {
						has_war_with = ROOT
						has_civil_war = yes
						has_capitulated = yes
						NOT = { owns_state = 846 } #Owns Rome
					}
				}
			}	
		}


		#On Activation
		complete_effect = {
			ITA = {
				add_offsite_building = {
					type = industrial_complex
					level = 2
				}
			}
		}

		#Fail
		cancel_effect = {
			ITA = {
				add_offsite_building = {
					type = industrial_complex
					level = -2
				}
				remove_opinion_modifier = {
					target = POR
					modifier = POR_bought_ships
				}
			}
			remove_opinion_modifier = {
				target = ITA
				modifier = POR_sold_ships
			}
			remove_opinion_modifier = {
				target = ITA
				modifier = POR_ships_trade
			}			
			clr_country_flag = POR_purchase_italian_submarines_flag
			clr_country_flag = POR_ships_purchase_in_progress_flag
		}

		#Success
		remove_effect = {
			hidden_effect = { add_manpower = 600 }
			if = {
				limit = { has_dlc = "Man the Guns" }
				if = { 
					limit = {
						ITA = { has_tech = advanced_ship_hull_submarine }
					}
					hidden_effect = {
						ITA = {
							create_equipment_variant = {
								name = "Delfim II Class"				
								type = nrm_ship_hull_submarine_4
								name_group = POR_SS_HISTORICAL
								parent_version = 0
								role_icon_index = 122
								modules = {
									fixed_ship_sub_hull_slot = nrm_submarine_hull_4
									fixed_ship_engine_slot = nrm_submarine_engine_D1_040
									fixed_ship_sonar_slot = nrm_submarine_sonar_2
									fixed_ship_noise_slot = nrm_submarine_noise_2
									fixed_ship_subdivision_slot = nrm_subdivision_2
									fixed_ship_damagecontrol_slot = nrm_damagecontrol_2
									fixed_ship_range_slot = nrm_range_submarine_2
									fixed_ship_radar_slot = empty
									fixed_ship_battery_slot = nrm_submarine_deckgun_4
									fixed_ship_anti_air_slot = empty
									fixed_ship_torpedo_slot = nrm_submarine_TRP_21_2_x4
									fixed_ship_torpedo_2_slot = nrm_submarine_TRP_21_2_x2
									custom_slot_1 = empty
									custom_slot_2 = empty
								}
							}
						}
					}
					POR = {
						create_equipment_variant = {
							name = "Delfim II Class"				
							type = nrm_ship_hull_submarine_4
							name_group = POR_SS_HISTORICAL
							parent_version = 0
							role_icon_index = 122
							modules = {
								fixed_ship_sub_hull_slot = nrm_submarine_hull_4
								fixed_ship_engine_slot = nrm_submarine_engine_D1_040
								fixed_ship_sonar_slot = nrm_submarine_sonar_2
								fixed_ship_noise_slot = nrm_submarine_noise_2
								fixed_ship_subdivision_slot = nrm_subdivision_2
								fixed_ship_damagecontrol_slot = nrm_damagecontrol_2
								fixed_ship_range_slot = nrm_range_submarine_2
								fixed_ship_radar_slot = empty
								fixed_ship_battery_slot = nrm_submarine_deckgun_4
								fixed_ship_anti_air_slot = empty
								fixed_ship_torpedo_slot = nrm_submarine_TRP_21_2_x4
								fixed_ship_torpedo_2_slot = nrm_submarine_TRP_21_2_x2
								custom_slot_1 = empty
								custom_slot_2 = empty
							}
						}
					}
					create_ship = { type = nrm_ship_hull_submarine_4 equipment_variant = "Delfim II Class" creator = ITA }
					create_ship = { type = nrm_ship_hull_submarine_4 equipment_variant = "Delfim II Class" creator = ITA }
					create_ship = { type = nrm_ship_hull_submarine_4 equipment_variant = "Delfim II Class" creator = ITA }
				}
				else_if = { 
					limit = {
						ITA = { has_tech = improved_ship_hull_submarine }
					}
					hidden_effect = {
						ITA = {
							create_equipment_variant = {
								name = "Delfim II Class"				
								type = nrm_ship_hull_submarine_3
								name_group = POR_SS_HISTORICAL
								parent_version = 0
								role_icon_index = 122
								modules = {
									fixed_ship_sub_hull_slot = nrm_submarine_hull_3
									fixed_ship_engine_slot = nrm_submarine_engine_D1_040
									fixed_ship_sonar_slot = nrm_submarine_sonar_2
									fixed_ship_noise_slot = nrm_submarine_noise_1
									fixed_ship_subdivision_slot = nrm_subdivision_2
									fixed_ship_damagecontrol_slot = nrm_damagecontrol_2
									fixed_ship_range_slot = nrm_range_submarine_2
									fixed_ship_radar_slot = empty
									fixed_ship_battery_slot = nrm_submarine_deckgun_4
									fixed_ship_anti_air_slot = empty
									fixed_ship_torpedo_slot = nrm_submarine_TRP_21_2_x4
									fixed_ship_torpedo_2_slot = nrm_submarine_TRP_21_2_x2
									custom_slot_1 = empty
									custom_slot_2 = empty
								}
							}
						}
					}
					POR = {
						create_equipment_variant = {
							name = "Delfim II Class"				
							type = nrm_ship_hull_submarine_3
							name_group = POR_SS_HISTORICAL
							parent_version = 0
							role_icon_index = 122
							modules = {
								fixed_ship_sub_hull_slot = nrm_submarine_hull_3
								fixed_ship_engine_slot = nrm_submarine_engine_D1_040
								fixed_ship_sonar_slot = nrm_submarine_sonar_2
								fixed_ship_noise_slot = nrm_submarine_noise_1
								fixed_ship_subdivision_slot = nrm_subdivision_2
								fixed_ship_damagecontrol_slot = nrm_damagecontrol_2
								fixed_ship_range_slot = nrm_range_submarine_2
								fixed_ship_radar_slot = empty
								fixed_ship_battery_slot = nrm_submarine_deckgun_4
								fixed_ship_anti_air_slot = empty
								fixed_ship_torpedo_slot = nrm_submarine_TRP_21_2_x4
								fixed_ship_torpedo_2_slot = nrm_submarine_TRP_21_2_x2
								custom_slot_1 = empty
								custom_slot_2 = empty
							}
						}
					}
					create_ship = { type = nrm_ship_hull_submarine_3 equipment_variant = "Delfim II Class" creator = ITA }
					create_ship = { type = nrm_ship_hull_submarine_3 equipment_variant = "Delfim II Class" creator = ITA }
					create_ship = { type = nrm_ship_hull_submarine_3 equipment_variant = "Delfim II Class" creator = ITA }
				}
				else = {
					hidden_effect = {
						ITA = {
							create_equipment_variant = {
								name = "Delfim II Class"				
								type = nrm_ship_hull_submarine_2
								name_group = POR_SS_HISTORICAL
								parent_version = 0
								role_icon_index = 122
								modules = {
									fixed_ship_sub_hull_slot = nrm_submarine_hull_2
									fixed_ship_engine_slot = nrm_submarine_engine_D1_040
									fixed_ship_sonar_slot = nrm_submarine_sonar_2
									fixed_ship_noise_slot = nrm_submarine_noise_0
									fixed_ship_subdivision_slot = nrm_subdivision_2
									fixed_ship_damagecontrol_slot = nrm_damagecontrol_2
									fixed_ship_range_slot = nrm_range_submarine_2
									fixed_ship_radar_slot = empty
									fixed_ship_battery_slot = nrm_submarine_deckgun_4
									fixed_ship_anti_air_slot = empty
									fixed_ship_torpedo_slot = nrm_submarine_TRP_21_2_x4
									fixed_ship_torpedo_2_slot = nrm_submarine_TRP_21_2_x2
									custom_slot_1 = empty
									custom_slot_2 = empty
								}
							}
						}
					}
					POR = {
						create_equipment_variant = {
							name = "Delfim II Class"				
							type = nrm_ship_hull_submarine_2
							name_group = POR_SS_HISTORICAL
							parent_version = 0
							role_icon_index = 122
							modules = {
								fixed_ship_sub_hull_slot = nrm_submarine_hull_2
								fixed_ship_engine_slot = nrm_submarine_engine_D1_040
								fixed_ship_sonar_slot = nrm_submarine_sonar_2
								fixed_ship_noise_slot = nrm_submarine_noise_0
								fixed_ship_subdivision_slot = nrm_subdivision_2
								fixed_ship_damagecontrol_slot = nrm_damagecontrol_2
								fixed_ship_range_slot = nrm_range_submarine_2
								fixed_ship_radar_slot = empty
								fixed_ship_battery_slot = nrm_submarine_deckgun_4
								fixed_ship_anti_air_slot = empty
								fixed_ship_torpedo_slot = nrm_submarine_TRP_21_2_x4
								fixed_ship_torpedo_2_slot = nrm_submarine_TRP_21_2_x2
								custom_slot_1 = empty
								custom_slot_2 = empty
							}
						}
					}
					create_ship = { type = nrm_ship_hull_submarine_2 equipment_variant = "Delfim II Class" creator = ITA }
					create_ship = { type = nrm_ship_hull_submarine_2 equipment_variant = "Delfim II Class" creator = ITA }
					create_ship = { type = nrm_ship_hull_submarine_2 equipment_variant = "Delfim II Class" creator = ITA }
				}
			}

			ITA = {
				add_offsite_building = {
					type = industrial_complex
					level = -2
				}
			}
			country_event = lar_portugal_purchase_ships.4
			set_country_flag = POR_ships_purchased_flag
			clr_country_flag = POR_purchase_italian_submarines_flag
			clr_country_flag = POR_ships_purchase_in_progress_flag
		}
	}

	#Mission to track the progress of British DESTROYERS construction
	POR_british_destroyers_construction_progress = {
		
		icon = generic_naval

		allowed = {
			original_tag = POR
		}

		visible = {
			has_country_flag = POR_purchase_british_destroyers_flag
			has_dlc = "Man the Guns"
		}
		
		modifier = {
			civilian_factory_use = 2
		}

		days_remove = 365

		cancel_trigger = {
			OR = {
				NOT = { country_exists = POR }
				NOT = { country_exists = ENG }
				ENG = {
					OR = {
						has_war_with = ROOT
						has_civil_war = yes
						has_capitulated = yes
						NOT = { owns_state = 126 } #Owns London
					}
				}
			}
		}

		#On Activation
		complete_effect = {
			ENG = {
				add_offsite_building = {
					type = industrial_complex
					level = 2
				}
			}
		}

		#Fail
		cancel_effect = {
			ENG = {
				add_offsite_building = {
					type = industrial_complex
					level = -2
				}
				remove_opinion_modifier = {
					target = POR
					modifier = POR_bought_ships
				}
			}
			remove_opinion_modifier = {
				target = ENG
				modifier = POR_sold_ships
			}
			remove_opinion_modifier = {
				target = ENG
				modifier = POR_ships_trade
			}		
			clr_country_flag = POR_purchase_british_destroyers_flag
			clr_country_flag = POR_ships_purchase_in_progress_flag
		}

		#Success
		remove_effect = {
			if = {
				limit = { has_dlc = "Man the Guns" }
				if = { 
					limit = {
						ENG = { has_tech = improved_ship_hull_light }
					}
					hidden_effect = { 
						add_manpower = 1000
						ENG = {
							create_equipment_variant = {
								name = "Vouga II Class"	
								type = nrm_ship_hull_destroyer_3
								name_group = POR_DD_HISTORICAL
								parent_version = 0
								role_icon_index = 39
								modules = {
									fixed_ship_hullform_slot = nrm_ship_hullform_destroyer_3
									fixed_ship_engine_slot = nrm_destroyer_engine_S2_050
									fixed_ship_sonar_slot = nrm_sonar_3
									fixed_ship_battery_slot = nrm_destroyer_battery_5_2_x5
									fixed_ship_subdivision_slot = nrm_subdivision_3
									fixed_ship_damagecontrol_slot = nrm_damagecontrol_3
									fixed_ship_range_slot = nrm_range_destroyer_2
									fixed_ship_radar_slot = empty
									fixed_ship_fire_control_system_slot = nrm_fire_control_4
									fixed_ship_fire_control_system_aa_slot = empty
									custom_slot_1 = nrm_support_destroyer_ML_1
									custom_slot_2 = nrm_support_destroyer_ASW_2
									custom_slot_3 = nrm_support_destroyer_TRP_21_C_2_x4
									custom_slot_4 = nrm_support_destroyer_TRP_21_C_2_x4
									custom_slot_5 = nrm_support_destroyer_AA_1
									custom_slot_6 = empty
								}
							}
						}
					}
					POR = {
						create_equipment_variant = {
							name = "Vouga II Class"	
							type = nrm_ship_hull_destroyer_3
							name_group = POR_DD_HISTORICAL
							parent_version = 0
							role_icon_index = 39
							modules = {
								fixed_ship_hullform_slot = nrm_ship_hullform_destroyer_3
								fixed_ship_engine_slot = nrm_destroyer_engine_S2_050
								fixed_ship_sonar_slot = nrm_sonar_3
								fixed_ship_battery_slot = nrm_destroyer_battery_5_2_x5
								fixed_ship_subdivision_slot = nrm_subdivision_3
								fixed_ship_damagecontrol_slot = nrm_damagecontrol_3
								fixed_ship_range_slot = nrm_range_destroyer_2
								fixed_ship_radar_slot = empty
								fixed_ship_fire_control_system_slot = nrm_fire_control_4
								fixed_ship_fire_control_system_aa_slot = empty
								custom_slot_1 = nrm_support_destroyer_ML_1
								custom_slot_2 = nrm_support_destroyer_ASW_2
								custom_slot_3 = nrm_support_destroyer_TRP_21_C_2_x4
								custom_slot_4 = nrm_support_destroyer_TRP_21_C_2_x4
								custom_slot_5 = nrm_support_destroyer_AA_1
								custom_slot_6 = empty
							}
						}
					}
					create_ship = { type = nrm_ship_hull_destroyer_3 equipment_variant = "Vouga II Class" creator = ENG }
					create_ship = { type = nrm_ship_hull_destroyer_3 equipment_variant = "Vouga II Class" creator = ENG }
				}
				else = {
					hidden_effect = { 
						add_manpower = 650 
						ENG = {
							create_equipment_variant = {
								name = "Vouga II Class"	
								type = nrm_ship_hull_destroyer_2
								name_group = POR_DD_HISTORICAL
								parent_version = 0
								role_icon_index = 39
								modules = {
									fixed_ship_hullform_slot = nrm_ship_hullform_destroyer_2
									fixed_ship_engine_slot = nrm_destroyer_engine_S2_040
									fixed_ship_sonar_slot = nrm_sonar_3
									fixed_ship_battery_slot = nrm_destroyer_battery_5_2_x5
									fixed_ship_subdivision_slot = nrm_subdivision_3
									fixed_ship_damagecontrol_slot = nrm_damagecontrol_3
									fixed_ship_range_slot = nrm_range_destroyer_2
									fixed_ship_radar_slot = empty
									fixed_ship_fire_control_system_slot = nrm_fire_control_3
									fixed_ship_fire_control_system_aa_slot = empty
									custom_slot_1 = nrm_support_destroyer_ML_1
									custom_slot_2 = nrm_support_destroyer_ASW_2
									custom_slot_3 = nrm_support_destroyer_TRP_21_C_2_x4
									custom_slot_4 = nrm_support_destroyer_TRP_21_C_2_x4
									custom_slot_5 = nrm_support_destroyer_AA_1
									custom_slot_6 = empty
								}
							}
						}
					}
					POR = {
						create_equipment_variant = {
							name = "Vouga II Class"	
							type = nrm_ship_hull_destroyer_2
							name_group = POR_DD_HISTORICAL
							parent_version = 0
							role_icon_index = 39
							modules = {
								fixed_ship_hullform_slot = nrm_ship_hullform_destroyer_2
								fixed_ship_engine_slot = nrm_destroyer_engine_S2_040
								fixed_ship_sonar_slot = nrm_sonar_3
								fixed_ship_battery_slot = nrm_destroyer_battery_5_2_x5
								fixed_ship_subdivision_slot = nrm_subdivision_3
								fixed_ship_damagecontrol_slot = nrm_damagecontrol_3
								fixed_ship_range_slot = nrm_range_destroyer_2
								fixed_ship_radar_slot = empty
								fixed_ship_fire_control_system_slot = nrm_fire_control_3
								fixed_ship_fire_control_system_aa_slot = empty
								custom_slot_1 = nrm_support_destroyer_ML_1
								custom_slot_2 = nrm_support_destroyer_ASW_2
								custom_slot_3 = nrm_support_destroyer_TRP_21_C_2_x4
								custom_slot_4 = nrm_support_destroyer_TRP_21_C_2_x4
								custom_slot_5 = nrm_support_destroyer_AA_1
								custom_slot_6 = empty
							}
						}
					}
					create_ship = { type = nrm_ship_hull_destroyer_2 equipment_variant = "Vouga II Class" creator = ENG }
					create_ship = { type = nrm_ship_hull_destroyer_2 equipment_variant = "Vouga II Class" creator = ENG }
				}
			}

			ENG = {
				add_offsite_building = {
					type = industrial_complex
					level = -2
				}
			}
			country_event = lar_portugal_purchase_ships.5
			set_country_flag = POR_ships_purchased_flag
			clr_country_flag = POR_purchase_british_destroyers_flag
			clr_country_flag = POR_ships_purchase_in_progress_flag
		}
	}

	#Mission to track the progress of Italian DESTROYERS construction
	POR_italian_destroyers_construction_progress = {
		
		icon = generic_naval

		allowed = {
			original_tag = POR
		}

		visible = {
			has_country_flag = POR_purchase_italian_destroyers_flag
			has_dlc = "Man the Guns"
		}

		modifier = {
			civilian_factory_use = 2
		}

		days_remove = 365

		cancel_trigger = {
			OR = {
				NOT = { country_exists = POR }
				NOT = { country_exists = ITA }
				ITA = {
					OR = {
						has_war_with = ROOT
						has_civil_war = yes
						has_capitulated = yes
						NOT = { owns_state = 846 } #Owns Rome
					}
				}
			}
		}

		#On Activation
		complete_effect ={
			ITA = {
				add_offsite_building = {
					type = industrial_complex
					level = 2
				}
			}
		}

		#Fail
		cancel_effect = {
			ITA = {
				add_offsite_building = {
					type = industrial_complex
					level = -2
				}
				remove_opinion_modifier = {
					target = POR
					modifier = POR_bought_ships
				}
			}
			remove_opinion_modifier = {
				target = ITA
				modifier = POR_sold_ships
			}
			remove_opinion_modifier = {
				target = ITA
				modifier = POR_ships_trade
			}		
			clr_country_flag = POR_purchase_italian_destroyers_flag
			clr_country_flag = POR_ships_purchase_in_progress_flag
		}

		is_good = yes
		#Success
		remove_effect = {
			if = {
				limit = { has_dlc = "Man the Guns" }
				if = { 
					limit = {
						ITA = { has_tech = improved_ship_hull_light }
					}
					hidden_effect = { 
						add_manpower = 1000 
						ITA = {
							create_equipment_variant = {
								name = "Vouga II Class"	
								type = nrm_ship_hull_destroyer_3
								name_group = POR_DD_HISTORICAL
								parent_version = 0
								role_icon_index = 39
								modules = {
									fixed_ship_hullform_slot = nrm_ship_hullform_destroyer_3
									fixed_ship_engine_slot = nrm_destroyer_engine_S2_060
									fixed_ship_sonar_slot = nrm_sonar_2
									fixed_ship_battery_slot = nrm_destroyer_battery_5_2_x6
									fixed_ship_subdivision_slot = nrm_subdivision_2
									fixed_ship_damagecontrol_slot = nrm_damagecontrol_2
									fixed_ship_range_slot = nrm_range_destroyer_1h
									fixed_ship_radar_slot = empty
									fixed_ship_fire_control_system_slot = nrm_fire_control_4
									fixed_ship_fire_control_system_aa_slot = empty
									custom_slot_1 = nrm_support_destroyer_ML_1
									custom_slot_2 = nrm_support_destroyer_ASW_2
									custom_slot_3 = nrm_support_destroyer_TRP_21_C_2_x4
									custom_slot_4 = nrm_support_destroyer_TRP_21_C_2_x4
									custom_slot_5 = nrm_support_destroyer_AA_1
									custom_slot_6 = empty
								}
							}
						}
					}
					POR = {
						create_equipment_variant = {
							name = "Vouga II Class"	
							type = nrm_ship_hull_destroyer_3
							name_group = POR_DD_HISTORICAL
							parent_version = 0
							role_icon_index = 39
							modules = {
								fixed_ship_hullform_slot = nrm_ship_hullform_destroyer_3
								fixed_ship_engine_slot = nrm_destroyer_engine_S2_060
								fixed_ship_sonar_slot = nrm_sonar_2
								fixed_ship_battery_slot = nrm_destroyer_battery_5_2_x6
								fixed_ship_subdivision_slot = nrm_subdivision_2
								fixed_ship_damagecontrol_slot = nrm_damagecontrol_2
								fixed_ship_range_slot = nrm_range_destroyer_1h
								fixed_ship_radar_slot = empty
								fixed_ship_fire_control_system_slot = nrm_fire_control_4
								fixed_ship_fire_control_system_aa_slot = empty
								custom_slot_1 = nrm_support_destroyer_ML_1
								custom_slot_2 = nrm_support_destroyer_ASW_2
								custom_slot_3 = nrm_support_destroyer_TRP_21_C_2_x4
								custom_slot_4 = nrm_support_destroyer_TRP_21_C_2_x4
								custom_slot_5 = nrm_support_destroyer_AA_1
								custom_slot_6 = empty
							}
						}
					}
					create_ship = { type = nrm_ship_hull_destroyer_3 equipment_variant = "Vouga II Class" creator = ITA }
					create_ship = { type = nrm_ship_hull_destroyer_3 equipment_variant = "Vouga II Class" creator = ITA }
				}
				else = {
					hidden_effect = { 
						add_manpower = 650
						ITA = {
							create_equipment_variant = {
								name = "Vouga II Class"	
								type = nrm_ship_hull_destroyer_2
								name_group = POR_DD_HISTORICAL
								parent_version = 0
								role_icon_index = 39
								modules = {
									fixed_ship_hullform_slot = nrm_ship_hullform_destroyer_2
									fixed_ship_engine_slot = nrm_destroyer_engine_S2_050
									fixed_ship_sonar_slot = nrm_sonar_2
									fixed_ship_battery_slot = nrm_destroyer_battery_5_2_x6
									fixed_ship_subdivision_slot = nrm_subdivision_2
									fixed_ship_damagecontrol_slot = nrm_damagecontrol_2
									fixed_ship_range_slot = nrm_range_destroyer_1h
									fixed_ship_radar_slot = empty
									fixed_ship_fire_control_system_slot = nrm_fire_control_4
									fixed_ship_fire_control_system_aa_slot = empty
									custom_slot_1 = nrm_support_destroyer_ML_1
									custom_slot_2 = nrm_support_destroyer_ASW_2
									custom_slot_3 = nrm_support_destroyer_TRP_21_C_2_x4
									custom_slot_4 = nrm_support_destroyer_TRP_21_C_2_x4
									custom_slot_5 = nrm_support_destroyer_AA_1
									custom_slot_6 = empty
								}
							}
						}
					}
					POR = {
						create_equipment_variant = {
							name = "Vouga II Class"	
							type = nrm_ship_hull_destroyer_2
							name_group = POR_DD_HISTORICAL
							parent_version = 0
							role_icon_index = 39
							modules = {
								fixed_ship_hullform_slot = nrm_ship_hullform_destroyer_2
								fixed_ship_engine_slot = nrm_destroyer_engine_S2_050
								fixed_ship_sonar_slot = nrm_sonar_2
								fixed_ship_battery_slot = nrm_destroyer_battery_5_2_x6
								fixed_ship_subdivision_slot = nrm_subdivision_2
								fixed_ship_damagecontrol_slot = nrm_damagecontrol_2
								fixed_ship_range_slot = nrm_range_destroyer_1h
								fixed_ship_radar_slot = empty
								fixed_ship_fire_control_system_slot = nrm_fire_control_4
								fixed_ship_fire_control_system_aa_slot = empty
								custom_slot_1 = nrm_support_destroyer_ML_1
								custom_slot_2 = nrm_support_destroyer_ASW_2
								custom_slot_3 = nrm_support_destroyer_TRP_21_C_2_x4
								custom_slot_4 = nrm_support_destroyer_TRP_21_C_2_x4
								custom_slot_5 = nrm_support_destroyer_AA_1
								custom_slot_6 = empty
							}
						}
					}
					create_ship = { type = nrm_ship_hull_destroyer_2 equipment_variant = "Vouga II Class" creator = ITA }
					create_ship = { type = nrm_ship_hull_destroyer_2 equipment_variant = "Vouga II Class" creator = ITA }
				}
			}

			ITA = {
				add_offsite_building = {
					type = industrial_complex
					level = -2
				}
			}
			country_event = lar_portugal_purchase_ships.5
			set_country_flag = POR_ships_purchased_flag
			clr_country_flag = POR_purchase_italian_destroyers_flag
			clr_country_flag = POR_ships_purchase_in_progress_flag
		}
	}

	#Mission to track the progress of British LIGHT CRUISER construction
	POR_british_light_cruiser_construction_progress = {
		
		icon = generic_naval

		allowed = {
			original_tag = POR
		}

		visible = {
			has_country_flag = POR_purchase_british_light_cruiser_flag
			has_dlc = "Man the Guns"
		}
		
		modifier = {
			civilian_factory_use = 2
		}

		days_remove = 600

		cancel_trigger = {
			OR = {
				NOT = { country_exists = POR }
				NOT = { country_exists = ENG }
				ENG = {
					OR = {
						has_war_with = ROOT
						has_civil_war = yes
						has_capitulated = yes
						NOT = { owns_state = 126 } #Owns London
					}
				}
			}
		}

		#Fail
		cancel_effect = {
			ENG = {
				add_offsite_building = {
					type = industrial_complex
					level = -2
				}
				remove_opinion_modifier = {
					target = POR
					modifier = POR_bought_ships
				}
			}
			remove_opinion_modifier = {
				target = ENG
				modifier = POR_sold_ships
			}
			remove_opinion_modifier = {
				target = ENG
				modifier = POR_ships_trade
			}
			clr_country_flag = POR_purchase_british_light_cruiser_flag
			clr_country_flag = POR_ships_purchase_in_progress_flag
		}

		#Success
		remove_effect = {
			if = {
				limit = { has_dlc = "Man the Guns" }
				if = { 
					limit = {
						ENG = { has_tech = advanced_ship_hull_cruiser }
					}
					hidden_effect = { 
						add_manpower = 1400 
						ENG = {
							create_equipment_variant = {
								name = "Atlântico Class"	
								type = nrm_ship_hull_cruiser_4
								name_group = POR_CL_HISTORICAL
								parent_version = 0
								role_icon_index = 41
								modules = {
									fixed_ship_hullform_slot = nrm_ship_hullform_cruiser_4
									fixed_ship_engine_slot = nrm_cruiser_engine_S2_075
									fixed_ship_armor_layout_slot = nrm_armour_layout_2
									fixed_ship_armor_slot = nrm_cruiser_armour_03_2
									fixed_ship_subdivision_slot = nrm_subdivision_3
									fixed_ship_damagecontrol_slot = nrm_damagecontrol_3
									fixed_ship_range_slot = nrm_range_cruiser_2
									fixed_ship_radar_slot = empty
									fixed_ship_fire_control_system_slot = nrm_fire_control_4
									fixed_ship_fire_control_system_aa_slot = empty
									fixed_ship_battery_slot = nrm_cruiser_battery_6_3_x09
									fixed_ship_tertiary_slot = nrm_cruiser_tertiary_HA_4_2_x12
									custom_slot_1 = empty
									custom_slot_2 = nrm_support_cruiser_TRP_21_2_x06
									custom_slot_3 = nrm_support_cruiser_FP_1
									custom_slot_4 = nrm_support_cruiser_AA_2
									custom_slot_5 = empty
									custom_slot_6 = nrm_support_cruiser_SNR_2
								}
							}
						}
					}
					POR = {
						create_equipment_variant = {
							name = "Atlântico Class"	
							type = nrm_ship_hull_cruiser_4
							name_group = POR_CL_HISTORICAL
							parent_version = 0
							role_icon_index = 41
							modules = {
								fixed_ship_hullform_slot = nrm_ship_hullform_cruiser_4
								fixed_ship_engine_slot = nrm_cruiser_engine_S2_075
								fixed_ship_armor_layout_slot = nrm_armour_layout_2
								fixed_ship_armor_slot = nrm_cruiser_armour_03_2
								fixed_ship_subdivision_slot = nrm_subdivision_3
								fixed_ship_damagecontrol_slot = nrm_damagecontrol_3
								fixed_ship_range_slot = nrm_range_cruiser_2
								fixed_ship_radar_slot = empty
								fixed_ship_fire_control_system_slot = nrm_fire_control_4
								fixed_ship_fire_control_system_aa_slot = empty
								fixed_ship_battery_slot = nrm_cruiser_battery_6_3_x09
								fixed_ship_tertiary_slot = nrm_cruiser_tertiary_HA_4_2_x12
								custom_slot_1 = empty
								custom_slot_2 = nrm_support_cruiser_TRP_21_2_x06
								custom_slot_3 = nrm_support_cruiser_FP_1
								custom_slot_4 = nrm_support_cruiser_AA_2
								custom_slot_5 = empty
								custom_slot_6 = nrm_support_cruiser_SNR_2
							}
						}
					}
					create_ship = { type = nrm_ship_hull_cruiser_4 equipment_variant = "Atlântico Class" creator = ENG }
				}
				else_if = { 
					limit = {
						ENG = { has_tech = improved_ship_hull_cruiser }
					}
					hidden_effect = { 
					add_manpower = 1200 
						ENG = {
							create_equipment_variant = {
								name = "Atlântico Class"	
								type = nrm_ship_hull_cruiser_3
								name_group = POR_CL_HISTORICAL
								parent_version = 0
								role_icon_index = 41
								modules = {
									fixed_ship_hullform_slot = nrm_ship_hullform_cruiser_3
									fixed_ship_engine_slot = nrm_cruiser_engine_S2_065
									fixed_ship_armor_layout_slot = nrm_armour_layout_2
									fixed_ship_armor_slot = nrm_cruiser_armour_02h_2
									fixed_ship_subdivision_slot = nrm_subdivision_3
									fixed_ship_damagecontrol_slot = nrm_damagecontrol_3
									fixed_ship_range_slot = nrm_range_cruiser_2
									fixed_ship_radar_slot = empty
									fixed_ship_fire_control_system_slot = nrm_fire_control_4
									fixed_ship_fire_control_system_aa_slot = empty
									fixed_ship_battery_slot = nrm_cruiser_battery_6_3_x08
									fixed_ship_tertiary_slot = nrm_cruiser_tertiary_HA_4_2_x08
									custom_slot_1 = empty
									custom_slot_2 = nrm_support_cruiser_TRP_21_2_x06
									custom_slot_3 = nrm_support_cruiser_FP_1
									custom_slot_4 = nrm_support_cruiser_AA_2
									custom_slot_5 = empty
									custom_slot_6 = nrm_support_cruiser_SNR_2
								}
							}
						}
					}
					POR = {
						create_equipment_variant = {
							name = "Atlântico Class"	
							type = nrm_ship_hull_cruiser_3
							name_group = POR_CL_HISTORICAL
							parent_version = 0
							role_icon_index = 41
							modules = {
								fixed_ship_hullform_slot = nrm_ship_hullform_cruiser_3
								fixed_ship_engine_slot = nrm_cruiser_engine_S2_065
								fixed_ship_armor_layout_slot = nrm_armour_layout_2
								fixed_ship_armor_slot = nrm_cruiser_armour_02h_2
								fixed_ship_subdivision_slot = nrm_subdivision_3
								fixed_ship_damagecontrol_slot = nrm_damagecontrol_3
								fixed_ship_range_slot = nrm_range_cruiser_2
								fixed_ship_radar_slot = empty
								fixed_ship_fire_control_system_slot = nrm_fire_control_4
								fixed_ship_fire_control_system_aa_slot = empty
								fixed_ship_battery_slot = nrm_cruiser_battery_6_3_x08
								fixed_ship_tertiary_slot = nrm_cruiser_tertiary_HA_4_2_x08
								custom_slot_1 = empty
								custom_slot_2 = nrm_support_cruiser_TRP_21_2_x06
								custom_slot_3 = nrm_support_cruiser_FP_1
								custom_slot_4 = nrm_support_cruiser_AA_2
								custom_slot_5 = empty
								custom_slot_6 = nrm_support_cruiser_SNR_2
							}
						}
					}
					create_ship = { type = nrm_ship_hull_cruiser_3 equipment_variant = "Atlântico Class" creator = ENG }
				}
				else = {
					hidden_effect = { 
						add_manpower = 800 
						ENG = {
							create_equipment_variant = {
								name = "Atlântico Class"	
								type = nrm_ship_hull_cruiser_2
								name_group = POR_CL_HISTORICAL
								parent_version = 0
								role_icon_index = 41
								modules = {
									fixed_ship_hullform_slot = nrm_ship_hullform_cruiser_2
									fixed_ship_engine_slot = nrm_cruiser_engine_S2_060
									fixed_ship_armor_layout_slot = nrm_armour_layout_2
									fixed_ship_armor_slot = nrm_cruiser_armour_02h_2
									fixed_ship_subdivision_slot = nrm_subdivision_3
									fixed_ship_damagecontrol_slot = nrm_damagecontrol_3
									fixed_ship_range_slot = nrm_range_cruiser_2
									fixed_ship_radar_slot = empty
									fixed_ship_fire_control_system_slot = nrm_fire_control_4
									fixed_ship_fire_control_system_aa_slot = empty
									fixed_ship_battery_slot = nrm_cruiser_battery_6_2_x08
									fixed_ship_tertiary_slot = nrm_cruiser_tertiary_HA_4_1_x08
									custom_slot_1 = empty
									custom_slot_2 = nrm_support_cruiser_TRP_21_2_x06
									custom_slot_3 = nrm_support_cruiser_FP_1
									custom_slot_4 = nrm_support_cruiser_AA_2
									custom_slot_5 = empty
									custom_slot_6 = nrm_support_cruiser_SNR_2
								}
							}
						}
					}
					POR = {
						create_equipment_variant = {
							name = "Atlântico Class"	
							type = nrm_ship_hull_cruiser_2
							name_group = POR_CL_HISTORICAL
							parent_version = 0
							role_icon_index = 41
							modules = {
								fixed_ship_hullform_slot = nrm_ship_hullform_cruiser_2
								fixed_ship_engine_slot = nrm_cruiser_engine_S2_060
								fixed_ship_armor_layout_slot = nrm_armour_layout_2
								fixed_ship_armor_slot = nrm_cruiser_armour_02h_2
								fixed_ship_subdivision_slot = nrm_subdivision_3
								fixed_ship_damagecontrol_slot = nrm_damagecontrol_3
								fixed_ship_range_slot = nrm_range_cruiser_2
								fixed_ship_radar_slot = empty
								fixed_ship_fire_control_system_slot = nrm_fire_control_4
								fixed_ship_fire_control_system_aa_slot = empty
								fixed_ship_battery_slot = nrm_cruiser_battery_6_2_x08
								fixed_ship_tertiary_slot = nrm_cruiser_tertiary_HA_4_1_x08
								custom_slot_1 = empty
								custom_slot_2 = nrm_support_cruiser_TRP_21_2_x06
								custom_slot_3 = nrm_support_cruiser_FP_1
								custom_slot_4 = nrm_support_cruiser_AA_2
								custom_slot_5 = empty
								custom_slot_6 = nrm_support_cruiser_SNR_2
							}
						}
					}
					create_ship = { type = nrm_ship_hull_cruiser_2 equipment_variant = "Atlântico Class" creator = ENG }
				}
			}

			ENG = {
				add_offsite_building = {
					type = industrial_complex
					level = -2
				}
			}
			country_event = lar_portugal_purchase_ships.6
			set_country_flag = POR_ships_purchased_flag
			clr_country_flag = POR_purchase_british_light_cruiser_flag
			clr_country_flag = POR_ships_purchase_in_progress_flag
		}
	}

	#Mission to track the progress of Italian LIGHT CRUISER construction
	POR_italian_light_cruiser_construction_progress = {
		
		icon = generic_naval

		allowed = {
			original_tag = POR
		}

		visible = {
			has_country_flag = POR_purchase_italian_light_cruiser_flag
			has_dlc = "Man the Guns"
		}
		
		modifier = {
			civilian_factory_use = 2
		}

		days_remove = 600

		cancel_trigger = {
			OR = {
				NOT = { country_exists = POR }
				NOT = { country_exists = ITA }
				ITA = {
					OR = {
						has_war_with = ROOT
						has_civil_war = yes
						has_capitulated = yes
						NOT = { owns_state = 846 } #Owns Rome
					}
				}
			}
		}

		#On Activation
		complete_effect ={
			ITA = {
				add_offsite_building = {
					type = industrial_complex
					level = 2
				}
			}
		}

		#Fail
		cancel_effect = {
			ITA = {
				add_offsite_building = {
					type = industrial_complex
					level = -2
				}
				remove_opinion_modifier = {
					target = POR
					modifier = POR_bought_ships
				}
			}
			remove_opinion_modifier = {
				target = ITA
				modifier = POR_sold_ships
			}
			remove_opinion_modifier = {
				target = ITA
				modifier = POR_ships_trade
			}
			clr_country_flag = POR_purchase_italian_light_cruiser_flag
			clr_country_flag = POR_ships_purchase_in_progress_flag
		}

		#Success
		remove_effect = {
			if = {
				limit = { has_dlc = "Man the Guns" }
				if = { 
					limit = {
						ITA = { has_tech = advanced_ship_hull_cruiser }
					}
					hidden_effect = { 
						add_manpower = 1400
						ITA = {
							create_equipment_variant = {
								name = "Atlântico Class"	
								type = nrm_ship_hull_cruiser_4
								name_group = POR_CL_HISTORICAL
								parent_version = 0
								role_icon_index = 41
								modules = {
									fixed_ship_hullform_slot = nrm_ship_hullform_cruiser_4
									fixed_ship_engine_slot = nrm_cruiser_engine_S2_090
									fixed_ship_armor_layout_slot = nrm_armour_layout_2
									fixed_ship_armor_slot = nrm_cruiser_armour_03h_2
									fixed_ship_subdivision_slot = nrm_subdivision_2
									fixed_ship_damagecontrol_slot = nrm_damagecontrol_2
									fixed_ship_range_slot = nrm_range_cruiser_1h
									fixed_ship_radar_slot = empty
									fixed_ship_fire_control_system_slot = nrm_fire_control_3
									fixed_ship_fire_control_system_aa_slot = empty
									fixed_ship_battery_slot = nrm_cruiser_battery_6_3_x10
									fixed_ship_tertiary_slot = nrm_cruiser_tertiary_HA_4_2_x08
									custom_slot_1 = empty
									custom_slot_2 = nrm_support_cruiser_TRP_21_2_x06
									custom_slot_3 = nrm_support_cruiser_FP_1
									custom_slot_4 = nrm_support_cruiser_AA_1
									custom_slot_5 = nrm_support_cruiser_AA_1
									custom_slot_6 = empty
								}
							}
						}
					}
					POR = {
						create_equipment_variant = {
							name = "Atlântico Class"	
							type = nrm_ship_hull_cruiser_4
							name_group = POR_CL_HISTORICAL
							parent_version = 0
							role_icon_index = 41
							modules = {
								fixed_ship_hullform_slot = nrm_ship_hullform_cruiser_4
								fixed_ship_engine_slot = nrm_cruiser_engine_S2_090
								fixed_ship_armor_layout_slot = nrm_armour_layout_2
								fixed_ship_armor_slot = nrm_cruiser_armour_03h_2
								fixed_ship_subdivision_slot = nrm_subdivision_2
								fixed_ship_damagecontrol_slot = nrm_damagecontrol_2
								fixed_ship_range_slot = nrm_range_cruiser_1h
								fixed_ship_radar_slot = empty
								fixed_ship_fire_control_system_slot = nrm_fire_control_3
								fixed_ship_fire_control_system_aa_slot = empty
								fixed_ship_battery_slot = nrm_cruiser_battery_6_3_x10
								fixed_ship_tertiary_slot = nrm_cruiser_tertiary_HA_4_2_x08
								custom_slot_1 = empty
								custom_slot_2 = nrm_support_cruiser_TRP_21_2_x06
								custom_slot_3 = nrm_support_cruiser_FP_1
								custom_slot_4 = nrm_support_cruiser_AA_1
								custom_slot_5 = nrm_support_cruiser_AA_1
								custom_slot_6 = empty
							}
						}
					}
					create_ship = { type = nrm_ship_hull_cruiser_4 equipment_variant = "Atlântico Class" creator = ITA }
				}
				else_if = { 
					limit = {
						ITA = { has_tech = improved_ship_hull_cruiser }
					}
					hidden_effect = { 
						add_manpower = 1200
						ITA = {
							create_equipment_variant = {
								name = "Atlântico Class"	
								type = nrm_ship_hull_cruiser_3
								name_group = POR_CL_HISTORICAL
								parent_version = 0
								role_icon_index = 41
								modules = {
									fixed_ship_hullform_slot = nrm_ship_hullform_cruiser_3
									fixed_ship_engine_slot = nrm_cruiser_engine_S2_080
									fixed_ship_armor_layout_slot = nrm_armour_layout_2
									fixed_ship_armor_slot = nrm_cruiser_armour_03_2
									fixed_ship_subdivision_slot = nrm_subdivision_2
									fixed_ship_damagecontrol_slot = nrm_damagecontrol_2
									fixed_ship_range_slot = nrm_range_cruiser_1h
									fixed_ship_radar_slot = empty
									fixed_ship_fire_control_system_slot = nrm_fire_control_3
									fixed_ship_fire_control_system_aa_slot = empty
									fixed_ship_battery_slot = nrm_cruiser_battery_6_3_x10
									fixed_ship_tertiary_slot = nrm_cruiser_tertiary_HA_3_2_x08
									custom_slot_1 = empty
									custom_slot_2 = nrm_support_cruiser_TRP_21_2_x06
									custom_slot_3 = nrm_support_cruiser_FP_1
									custom_slot_4 = nrm_support_cruiser_AA_1
									custom_slot_5 = empty
									custom_slot_6 = empty
								}
							}
						}
					}
					POR = {
						create_equipment_variant = {
							name = "Atlântico Class"	
							type = nrm_ship_hull_cruiser_3
							name_group = POR_CL_HISTORICAL
							parent_version = 0
							role_icon_index = 41
							modules = {
								fixed_ship_hullform_slot = nrm_ship_hullform_cruiser_3
								fixed_ship_engine_slot = nrm_cruiser_engine_S2_080
								fixed_ship_armor_layout_slot = nrm_armour_layout_2
								fixed_ship_armor_slot = nrm_cruiser_armour_03_2
								fixed_ship_subdivision_slot = nrm_subdivision_2
								fixed_ship_damagecontrol_slot = nrm_damagecontrol_2
								fixed_ship_range_slot = nrm_range_cruiser_1h
								fixed_ship_radar_slot = empty
								fixed_ship_fire_control_system_slot = nrm_fire_control_3
								fixed_ship_fire_control_system_aa_slot = empty
								fixed_ship_battery_slot = nrm_cruiser_battery_6_3_x10
								fixed_ship_tertiary_slot = nrm_cruiser_tertiary_HA_3_2_x08
								custom_slot_1 = empty
								custom_slot_2 = nrm_support_cruiser_TRP_21_2_x06
								custom_slot_3 = nrm_support_cruiser_FP_1
								custom_slot_4 = nrm_support_cruiser_AA_1
								custom_slot_5 = empty
								custom_slot_6 = empty
							}
						}
					}
					create_ship = { type = nrm_ship_hull_cruiser_3 equipment_variant = "Atlântico Class" creator = ITA }
				}
				else = {
					hidden_effect = { 
						add_manpower = 800 
						ITA = {
							create_equipment_variant = {
								name = "Atlântico Class"	
								type = nrm_ship_hull_cruiser_2
								name_group = POR_CL_HISTORICAL
								parent_version = 0
								role_icon_index = 41
								modules = {
									fixed_ship_hullform_slot = nrm_ship_hullform_cruiser_2
									fixed_ship_engine_slot = nrm_cruiser_engine_S2_070
									fixed_ship_armor_layout_slot = nrm_armour_layout_2
									fixed_ship_armor_slot = nrm_cruiser_armour_03_2
									fixed_ship_subdivision_slot = nrm_subdivision_2
									fixed_ship_damagecontrol_slot = nrm_damagecontrol_2
									fixed_ship_range_slot = nrm_range_cruiser_1h
									fixed_ship_radar_slot = empty
									fixed_ship_fire_control_system_slot = nrm_fire_control_3
									fixed_ship_fire_control_system_aa_slot = empty
									fixed_ship_battery_slot = nrm_cruiser_battery_6_2_x08
									fixed_ship_tertiary_slot = nrm_cruiser_tertiary_HA_3_2_x08
									custom_slot_1 = empty
									custom_slot_2 = nrm_support_cruiser_TRP_21_2_x06
									custom_slot_3 = nrm_support_cruiser_FP_1
									custom_slot_4 = nrm_support_cruiser_AA_1
									custom_slot_5 = empty
									custom_slot_6 = empty
								}
							}
						}
					}
					POR = {
						create_equipment_variant = {
							name = "Atlântico Class"	
							type = nrm_ship_hull_cruiser_2
							name_group = POR_CL_HISTORICAL
							parent_version = 0
							role_icon_index = 41
							modules = {
								fixed_ship_hullform_slot = nrm_ship_hullform_cruiser_2
								fixed_ship_engine_slot = nrm_cruiser_engine_S2_070
								fixed_ship_armor_layout_slot = nrm_armour_layout_2
								fixed_ship_armor_slot = nrm_cruiser_armour_03_2
								fixed_ship_subdivision_slot = nrm_subdivision_2
								fixed_ship_damagecontrol_slot = nrm_damagecontrol_2
								fixed_ship_range_slot = nrm_range_cruiser_1h
								fixed_ship_radar_slot = empty
								fixed_ship_fire_control_system_slot = nrm_fire_control_3
								fixed_ship_fire_control_system_aa_slot = empty
								fixed_ship_battery_slot = nrm_cruiser_battery_6_2_x08
								fixed_ship_tertiary_slot = nrm_cruiser_tertiary_HA_3_2_x08
								custom_slot_1 = empty
								custom_slot_2 = nrm_support_cruiser_TRP_21_2_x06
								custom_slot_3 = nrm_support_cruiser_FP_1
								custom_slot_4 = nrm_support_cruiser_AA_1
								custom_slot_5 = empty
								custom_slot_6 = empty
							}
						}
					}
					create_ship = { type = nrm_ship_hull_cruiser_2 equipment_variant = "Atlântico Class" creator = ITA }
				}
			}

			ITA = {
				add_offsite_building = {
					type = industrial_complex
					level = -2
				}
			}
			country_event = lar_portugal_purchase_ships.6
			set_country_flag = POR_ships_purchased_flag
			clr_country_flag = POR_purchase_italian_light_cruiser_flag
			clr_country_flag = POR_ships_purchase_in_progress_flag
		}
	}
}

POR_prospect_for_resources = {
	POR_develop_lisbon_tungsten_deposits = { #112
		
		icon = tungsten

		allowed = {

		}

		highlight_states = { 
			highlight_state_targets = {
				state = 112
			}
		}

		available = {
			has_completed_focus = POR_extraction_industries
			num_of_civilian_factories_available_for_projects > 2
			owns_state = 112
			controls_state = 112
		}

		visible = {
			owns_state = 112
			controls_state = 112
			112 = {
				NOT = {	has_state_flag = POR_lisbon_tungsten_developed_flag }
			}
		}

		cost = 25
		days_remove = 90
		fire_only_once = yes

		modifier = {
			civilian_factory_use = 7
		}

		remove_effect = {
			112 = {	set_state_flag = POR_lisbon_tungsten_developed_flag }
			112 = {
				add_resource = {
					type = tungsten
					amount = 20
				}
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 200
				factor = 0
			}
		}
	}

	POR_develop_santarem_chromium_deposits = { #181
		
		icon = chromium

		allowed = {

		}

		highlight_states = { 
			highlight_state_targets = {
				state = 795
			}
		}

		available = {
			has_completed_focus = POR_extraction_industries
			num_of_civilian_factories_available_for_projects > 1
			owns_state = 181
			controls_state = 181
		}

		visible = {
			owns_state = 181
			controls_state = 181
			181 = {
				NOT = {
					has_state_flag = { 
						flag = POR_santarem_chromium_developed_flag
						value = 5
					}
				}
			}
		}

		cost = 25
		days_remove = POR_santarem_chromium_duration

		modifier = {
			civilian_factory_use = 2
		}

		remove_effect = {
			add_to_variable = { var = POR_santarem_chromium_duration value = 30 }
			181 = {
				if = {
					limit = {
						NOT = {
							has_state_flag = POR_santarem_chromium_developed_flag
						}
					}
					set_state_flag = {
						flag = POR_santarem_chromium_developed_flag
						value = 1
					}
				}
				else = {
					modify_state_flag = {
						flag = POR_santarem_chromium_developed_flag
						value = 1
					}
				}
			}
			181 = {
				add_resource = {
					type = chromium
					amount = 4
				}
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 200
				factor = 0
			}
		}

		complete_effect = {
			if = {
				limit = {
					check_variable = { var = POR_santarem_chromium_duration value = 30 compare = less_than }
				}
				set_variable = { var = POR_santarem_chromium_duration value = 15 }
			}
		}
	}
}


